<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Telegram –±–æ—Ç —á–µ—Ä–µ–∑ webhook | Declaration of VAR</title>
    <link rel="canonical" href="https://decovar.dev/blog/2018/12/02/telegram-bot-webhook-ru/" />

    <meta name="generator" content="Hugo 0.119.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content="Telegram –±–æ—Ç —á–µ—Ä–µ–∑ webhook" />
<meta property="og:description" content="–Ø —Ç–æ–≥–¥–∞ –¥–∞–≤–Ω–æ –Ω–∞–ø–∏—Å–∞–ª —Å—Ç–∞—Ç—å—é –ø—Ä–æ —Å–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞, –∏ –æ–±–µ—â–∞–ª –¥–æ–ø–æ–ª–Ω–∏—Ç—å –µ—ë –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ webhook, –Ω–æ —Ç–∞–∫ –∏ –Ω–µ –¥–æ–ø–æ–ª–Ω–∏–ª. –í–æ—Ç —Ç–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å –¥–æ—à–ª–∏ —Ä—É–∫–∏.


    

This article in english üá∫üá∏." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2018/12/02/telegram-bot-webhook-ru/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2018-12-02T06:42:42-10:00" />
<meta property="article:modified_time" content="2018-12-02T06:42:42-10:00" />


    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.2a28493e0b91076cde9fb52cb7fec81f63f685a6965e6a9df1179ec846b9141f.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div style="background-color:orange; padding:4px 16px; font-size:0.8em; text-align:center; font-style:italic;">
        On 19.05.2021 the website was moved to
        <a href="https://decovar.dev/blog/2018/12/02/telegram-bot-webhook-ru/" style="color:black; font-weight:bold;">
            https://decovar.dev/</a>. This is just a mirror now.
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">Telegram –±–æ—Ç —á–µ—Ä–µ–∑ webhook</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2018-12-02 06:42:42 -1000</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 5 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p>–Ø —Ç–æ–≥–¥–∞ –¥–∞–≤–Ω–æ –Ω–∞–ø–∏—Å–∞–ª <a href="/blog/2015/10/24/telegram-bot/">—Å—Ç–∞—Ç—å—é</a> –ø—Ä–æ —Å–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞, –∏ –æ–±–µ—â–∞–ª –¥–æ–ø–æ–ª–Ω–∏—Ç—å –µ—ë –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ webhook, –Ω–æ —Ç–∞–∫ –∏ –Ω–µ –¥–æ–ø–æ–ª–Ω–∏–ª. –í–æ—Ç —Ç–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å –¥–æ—à–ª–∏ —Ä—É–∫–∏.</p>


    <img class="image-post" loading="lazy" src="/blog/2018/12/02/telegram-bot-webhook-ru/images/telegram-webhook.png" alt="Telegram bot webhook">

<p>This article <a href="/blog/2018/12/04/telegram-bot-webhook/">in english üá∫üá∏</a>.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#—á—Ç–æ-—ç—Ç–æ-—Ç–∞–∫–æ–µ">–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ</a></li>
    <li><a href="#–∫–∞–∫-–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å">–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å</a>
      <ul>
        <li><a href="#—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</a></li>
        <li><a href="#—Å–µ—Ä–≤–µ—Ä–Ω–∞—è-—á–∞—Å—Ç—å">–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å</a></li>
        <li><a href="#—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
      </ul>
    </li>
  </ul>
</nav>
<h1 id="—á—Ç–æ-—ç—Ç–æ-—Ç–∞–∫–æ–µ">–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ</h1>
<p>–ö–∞–∫ –ø–∏—à—É—Ç –≤ <a href="https://core.telegram.org/bots/webhooks">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>, –æ–±—â–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Telegram –±–æ—Ç –º–æ–∂–µ—Ç –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:</p>
<ol>
<li><a href="https://core.telegram.org/bots/api#getupdates">getUpdates</a> - pull: –≤–∞—à –±–æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥—ë—Ä–≥–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä Telegram –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è;</li>
<li><a href="https://core.telegram.org/bots/api#setwebhook">setWebhook</a> - push: –ø–æ –º–µ—Ä–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤–∞—à–µ–º—É –±–æ—Ç—É.</li>
</ol>
<p>–†–∞–∑–Ω–∏—Ü—É –º–æ–∂–Ω–æ –∏–∑–æ–±—Ä–∞–∑–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>


    <img class="image-post" loading="lazy" src="/blog/2018/12/02/telegram-bot-webhook-ru/images/telegram-getupdates-vs-setwebhook.png" alt="Telegram bot, getUpdates vs setWebhook">

<p>–û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –≤—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± (<code>setWebhook</code>) —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–µ–µ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞. –û–¥–Ω–∞–∫–æ –≤ –Ω—ë–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–µ—è–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: –∫—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Telegram –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–æ—Ç–∞, —Ç–æ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –µ–≥–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç.</p>
<h1 id="–∫–∞–∫-–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å">–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å</h1>
<p>–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:</p>
<ol>
<li>–ó–∞–∏–º–µ—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç <a href="https://letsencrypt.org">Let‚Äôs Encrypt</a>). –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–∞–∫–∂–µ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –≤ —Å–ª—É—á–∞–µ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –∏ –ø—Ä–æ—Å—Ç–æ IP –∞–¥—Ä–µ—Å–æ–º, –Ω–æ —ç—Ç–æ–≥–æ —è –Ω–µ –ø—Ä–æ–±–æ–≤–∞–ª;</li>
<li>–ó–∞–ø–∏–ª–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–æ—Ç–∞ (–∫—É–¥–∞ –±—É–¥–µ—Ç –ª–æ–º–∏—Ç—å—Å—è Telegram);</li>
<li>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –≤ Telegram (–∑–∞—Ü–µ–ø–∏—Ç—å webhook –Ω–∞ endpoint), —á—Ç–æ–±—ã Telegram –∑–Ω–∞–ª, –∫—É–¥–∞ –ª–æ–º–∏—Ç—å—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.</li>
</ol>
<h2 id="—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</h2>
<p>–° –¥–æ–º–µ–Ω–æ–º –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –ø—Ä–æ—Å—Ç–æ. –î–æ–º–µ–Ω —É –º–µ–Ω—è —É–∂–µ –±—ã–ª, –∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —è –ø–æ–ª—É—á–∏–ª –ø–æ <a href="https://certbot.eff.org/lets-encrypt/ubuntubionic-other">—ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</a>.</p>
<p>–í–∞—Ä–∏–∞–Ω—Ç —Å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –Ω–∞ –ø—Ä—è–º–æ–π IP –∞–¥—Ä–µ—Å —è –æ—Å—Ç–∞–≤–ª—è—é –≤–∞–º –Ω–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ.</p>
<h2 id="—Å–µ—Ä–≤–µ—Ä–Ω–∞—è-—á–∞—Å—Ç—å">–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å</h2>
<p>–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å —á—É—Ç—å –ø–æ—Å–ª–æ–∂–Ω–µ–µ. –Ø –ø–µ—Ä–µ–¥–µ–ª–∞–ª —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–æ—Ç–∞ –Ω–∞ <a href="https://github.com/eternnoir/pyTelegramBotAPI">pyTelegramBotAPI</a>, –∏—Å–ø–æ–ª—å–∑—É—è <a href="https://github.com/eternnoir/pyTelegramBotAPI/blob/master/examples/webhook_examples/webhook_aiohttp_echo_bot.py">–ø—Ä–∏–º–µ—Ä</a> –¥–ª—è <a href="https://aiohttp.readthedocs.io/">AIOHTTP</a>.</p>
<p>–°—Ç–∞–≤–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install pyTelegramBotAPI
</span></span><span style="display:flex;"><span>pip install aiohttp
</span></span><span style="display:flex;"><span>pip install cchardet
</span></span><span style="display:flex;"><span>pip install aiodns</span></span></code></pre></div>
<p>–ò —Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ –∫–æ–¥ –±–æ—Ç–∞ —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–æ–π:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> config
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> telebot
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> aiohttp <span style="color:#f92672">import</span> web
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> ssl
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>WEBHOOK_LISTEN <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0.0.0.0&#34;</span>
</span></span><span style="display:flex;"><span>WEBHOOK_PORT <span style="color:#f92672">=</span> <span style="color:#ae81ff">8443</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>WEBHOOK_SSL_CERT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/etc/letsencrypt/live/YOUR.DOMAIN/fullchain.pem&#34;</span>
</span></span><span style="display:flex;"><span>WEBHOOK_SSL_PRIV <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/etc/letsencrypt/live/YOUR.DOMAIN/privkey.pem&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>API_TOKEN <span style="color:#f92672">=</span> config<span style="color:#f92672">.</span>token
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> telebot<span style="color:#f92672">.</span>TeleBot(API_TOKEN)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> web<span style="color:#f92672">.</span>Application()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># process only requests with correct bot token</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>match_info<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;token&#34;</span>) <span style="color:#f92672">==</span> bot<span style="color:#f92672">.</span>token:
</span></span><span style="display:flex;"><span>        request_body_dict <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> request<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>        update <span style="color:#f92672">=</span> telebot<span style="color:#f92672">.</span>types<span style="color:#f92672">.</span>Update<span style="color:#f92672">.</span>de_json(request_body_dict)
</span></span><span style="display:flex;"><span>        bot<span style="color:#f92672">.</span>process_new_updates([update])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> web<span style="color:#f92672">.</span>Response()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> web<span style="color:#f92672">.</span>Response(status<span style="color:#f92672">=</span><span style="color:#ae81ff">403</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>router<span style="color:#f92672">.</span>add_post(<span style="color:#e6db74">&#34;/</span><span style="color:#e6db74">{token}</span><span style="color:#e6db74">/&#34;</span>, handle)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>help_string <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;*Some bot* - just a bot.</span><span style="color:#ae81ff">\n\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;/start - greetings</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;/help - shows this help&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - messages</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@bot.message_handler</span>(commands<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;start&#34;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_welcome</span>(message):
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_message(message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id, <span style="color:#e6db74">&#34;Ololo, I am a bot&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@bot.message_handler</span>(commands<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;help&#34;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_help</span>(message):
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_message(message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id, <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">.</span>join(help_string), parse_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Markdown&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>context <span style="color:#f92672">=</span> ssl<span style="color:#f92672">.</span>SSLContext(ssl<span style="color:#f92672">.</span>PROTOCOL_TLSv1_2)
</span></span><span style="display:flex;"><span>context<span style="color:#f92672">.</span>load_cert_chain(WEBHOOK_SSL_CERT, WEBHOOK_SSL_PRIV)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># start aiohttp server (our bot)</span>
</span></span><span style="display:flex;"><span>web<span style="color:#f92672">.</span>run_app(
</span></span><span style="display:flex;"><span>    app,
</span></span><span style="display:flex;"><span>    host<span style="color:#f92672">=</span>WEBHOOK_LISTEN,
</span></span><span style="display:flex;"><span>    port<span style="color:#f92672">=</span>WEBHOOK_PORT,
</span></span><span style="display:flex;"><span>    ssl_context<span style="color:#f92672">=</span>context,
</span></span><span style="display:flex;"><span>)</span></span></code></pre></div>
<p>–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –º–∏–Ω–∏-–≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 8443 –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π endpoint, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–∑–æ–≤–∞–Ω —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞. –¢–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–¥–µ—Å—å –∫–∞–∫ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, —á—Ç–æ–±—ã –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –º–∏–º–æ–∫—Ä–æ–∫–æ–¥–∏–ª –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–µ –Ω–∞–≤—ã–∑—ã–≤–∞–ª –±–æ—Ç–∞ –∏ –Ω–µ –Ω–∞—Ç–≤–æ—Ä–∏–ª –¥–µ–ª. –ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å endpoint&rsquo;–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–æ—Ç —Ç–∞–∫: <code>https://YOUR.DOMAIN:8443/YOUR-TOKEN/</code>.</p>
<p>–û–±—Ä–∞—Ç–∏—Ç–µ —Ç–∞–∫–∂–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ—Ç–ª–∏—á–∏—è –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:</p>
<ul>
<li>–≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —É–∫–∞–∑–∞–Ω <code>fullchain.pem</code>, –∞ –Ω–µ <code>cert.pem</code>;</li>
<li>—É–¥–∞–ª—ë–Ω –∫–æ–¥ —Å–Ω—è—Ç–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook&rsquo;–∞.</li>
</ul>
<p>–¢–∞–∫ –∫–∞–∫ –±–æ—Ç–∞ —è –∑–∞–ø—É—Å–∫–∞—é –Ω–µ –∏–∑-–ø–æ–¥ root&rsquo;–∞, —Å–µ—Ä–≤–∏—Å –Ω–∞—á–∞–ª –≤–∞–ª–∏—Ç—å—Å—è —Å —Ç–∞–∫–æ–π –æ—à–∏–±–∫–æ–π:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python-bot<span style="color:#f92672">[</span>1824<span style="color:#f92672">]</span>: Traceback <span style="color:#f92672">(</span>most recent call last<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>python-bot<span style="color:#f92672">[</span>1824<span style="color:#f92672">]</span>:   File <span style="color:#e6db74">&#34;/usr/local/bin/bot/bot.py&#34;</span>, line 142, in &lt;module&gt;
</span></span><span style="display:flex;"><span>python-bot<span style="color:#f92672">[</span>1824<span style="color:#f92672">]</span>:     context.load_cert_chain<span style="color:#f92672">(</span>WEBHOOK_SSL_CERT, WEBHOOK_SSL_PRIV<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>python-bot<span style="color:#f92672">[</span>1824<span style="color:#f92672">]</span>: PermissionError: <span style="color:#f92672">[</span>Errno 13<span style="color:#f92672">]</span> Permission denied
</span></span><span style="display:flex;"><span>systemd<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span>: telegram-bot.service: Main process exited, code<span style="color:#f92672">=</span>exited, status<span style="color:#f92672">=</span>1/FAILURE
</span></span><span style="display:flex;"><span>systemd<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span>: telegram-bot.service: Failed with result <span style="color:#e6db74">&#39;exit-code&#39;</span>.</span></span></code></pre></div>
<p>–¢–æ –µ—Å—Ç—å, —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–∑-–ø–æ–¥ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç, –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ <code>/etc/letsencrypt/</code>, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –Ø –ø–æ–ø—ã—Ç–∞–ª—Å—è –¥–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞—Ç–∞–ª–æ–≥—É –¥–ª—è –Ω–æ–≤–æ–π –≥—Ä—É–ø–ø—ã, –≤–∫–ª—é—á–∏–≤ –≤ –Ω–µ—ë —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupadd letsencrypt
</span></span><span style="display:flex;"><span>usermod -a -G letsencrypt userforbot
</span></span><span style="display:flex;"><span>chgrp -R letsencrypt /etc/letsencrypt/</span></span></code></pre></div>
<p>–ù–æ –æ–Ω –æ–¥–∏–Ω —Ñ–∏–≥ –Ω–µ –º–æ–≥ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã –æ—Ç—Ç—É–¥–∞, –¥–∞–∂–µ –ø—Ä–æ—Å—Ç–æ–π <code>ls</code> –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É –¥–æ—Å—Ç—É–ø–∞. –í –æ–±—â–µ–º, –∏–ª–∏ –º–æ–∏ –ø–æ–∑–Ω–∞–Ω–∏—è Linux –ø–æ–ª–Ω—ã–π –æ—Ç—Å—Ç–æ–π, –∏–ª–∏ –æ–¥–Ω–æ –∏–∑ –¥–≤—É—Ö. –ü—Ä–∏—à–ª–æ—Å—å —Ç—É–ø–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –µ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chown -R userforbot:letsencrypt /etc/letsencrypt/</span></span></code></pre></div>
<p>–¢–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ.</p>
<h2 id="—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
<p>–¢–µ–ø–µ—Ä—å –æ—Å—Ç–∞–ª–æ—Å—å —Å–∞–º–æ–µ, –∫–∞–∫ –æ–∫–∞–∑–∞–ª–æ—Å—å, —Å–ª–æ–∂–Ω–æ–µ - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å endpoint –±–æ—Ç–∞ –≤ Telegram. –°–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø–æ—Ç–æ–º—É, —á—Ç–æ —è —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω—è–ª –ø—Ä–∏–Ω—Ü–∏–ø —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è endpoint&rsquo;–∞, –∞ —Ç–∞–∫–∂–µ –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.</p>
<p>–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ webhook&rsquo;–∞ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π HTTP –∑–∞–ø—Ä–æ—Å (–º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã—Ç—å —ç—Ç–æ—Ç URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>https<span style="color:#66d9ef">:</span><span style="color:#66d9ef">//api.telegram.org/botYOUR-TOKEN/setWebhook?url</span><span style="color:#f92672">=</span>https<span style="color:#66d9ef">:</span><span style="color:#66d9ef">//YOUR.DOMAIN:</span><span style="color:#960050;background-color:#1e0010">8443</span><span style="color:#66d9ef">/YOUR-TOKEN/</span></span></span></code></pre></div>
<p>–ü–æ–∫–∞ —è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª –∏ —Ä–∞–∑–±–∏—Ä–∞–ª—Å—è —Å —Ñ–æ—Ä–º–∞—Ç–æ–º endpoint&rsquo;–∞, Telegram –≤–æ–∑–≤—Ä–∞—â–∞–ª –º–Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Webhook was set&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ok&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>–ù–æ –ø–æ—Ç–æ–º —è –µ–≥–æ –≤–∏–¥–∏–º–æ –∑–∞–¥–æ–ª–±–∞–ª, –∏ –æ–Ω —Å—Ç–∞–ª –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–Ω–µ —Å–ª–µ–¥—É—é—â–µ–µ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ok&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;error_code&#34;</span>: <span style="color:#ae81ff">504</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Gateway Timeout&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>–ù–æ –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ —ç—Ç–æ –Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç, –∏ webhook –Ω–æ—Ä–º–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, —Ç–∞–∫ —á—Ç–æ –º–æ–∂–Ω–æ –¥–∞–∂–µ –Ω–µ –¥–æ–∂–∏–¥–∞—Ç—å—Å—è —Ç–∞–π–º–∞—É—Ç–∞, –∞ –ø—Ä–æ—Å—Ç–æ –æ—Ç–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥.</p>
<p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å webhook&rsquo;–∞ –º–æ–∂–Ω–æ —Ç–∞–∫–∏–º –∑–∞–ø—Ä–æ—Å–æ–º:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>https<span style="color:#66d9ef">:</span><span style="color:#66d9ef">//api.telegram.org/botYOUR-TOKEN/getWebhookInfo</span></span></span></code></pre></div>
<p>–ï—Å–ª–∏ –≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ç–∞–∫–æ–µ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ok&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;result&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;https://YOUR.DOMAIN:8443/YOUR-TOKEN/&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;has_custom_certificate&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;pending_update_count&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;max_connections&#34;</span>: <span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>–ö–∞–∫ –≤–∏–¥–∏–º, –≤ –ø–æ–ª–µ <code>url</code> —Å—Ç–æ–∏—Ç –Ω–∞—à endpoint.</p>
<p>–û–¥–Ω–∞–∫–æ, –º–Ω–µ –æ–Ω–æ —Å–µ–π—á–∞—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–∫–æ–µ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ok&#34;</span>: true,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;result&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;https://YOUR.DOMAIN:8443/YOUR-TOKEN/&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;has_custom_certificate&#34;</span>: false,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;pending_update_count&#34;</span>: 0,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;last_error_date&#34;</span>: 1543762687,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;last_error_message&#34;</span>: <span style="color:#e6db74">&#34;SSL error {error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed}&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;max_connections&#34;</span>: <span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div>
<p>–ß—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º. –ü—Ä–∏ —ç—Ç–æ–º –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–æ –µ—Å—Ç—å —ç—Ç–∞ –æ—à–∏–±–∫–∞ –Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤–º–µ—Å—Ç–æ <code>fullchain.pem</code> –æ—Å—Ç–∞–≤–∏—Ç—å <code>cert.pem</code> (–∫–∞–∫ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ), —Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç.</p>
<p>–°—Ç–æ–∏—Ç —Ç–∞–∫–∂–µ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –µ—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ webhook, —Ç–æ –æ–ø—Ä–æ—Å Telegram —á–µ—Ä–µ–∑ <code>getUpdates</code> —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–µ –±—É–¥–µ—Ç. –ß—Ç–æ–±—ã —Å–Ω—è—Ç—å webhook, –Ω–∞–¥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π –∑–∞–ø—Ä–æ—Å, —á—Ç–æ –∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –Ω–æ –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ <code>url</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>https<span style="color:#66d9ef">:</span><span style="color:#66d9ef">//api.telegram.org/botYOUR-TOKEN/setWebhook</span></span></span></code></pre></div>
<p>–í –æ—Ç–≤–µ—Ç –ø—Ä–∏–¥—ë—Ç:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ok&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Webhook was deleted&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>–ù—É –∏ –≤—Å—ë, –Ω–µ —Ç–∞–∫ —É–∂ –∏ —Å–ª–æ–∂–Ω–æ. –ï—Å–ª–∏ –±—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –º–∞–Ω—É–ª–∞—Ö –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–≤) –±—ã–ª–∞ —É–∫–∞–∑–∞–Ω–∞ —Ç–∞–∫–∞—è –ø—Ä–æ—Å—Ç–∞—è –≤–µ—â—å, —á—Ç–æ –¥–ª—è webhook&rsquo;–∞ –≤—Å–µ–≥–æ-—Ç–æ –Ω—É–∂–µ–Ω –ª–∏—à—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–æ—Ç–∞, —è –±—ã —ç—Ç–æ —Å–¥–µ–ª–∞–ª —É–∂–µ —Å—Ç–æ –ª–µ—Ç –Ω–∞–∑–∞–¥. –ö–æ–Ω–µ—á–Ω–æ, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º —á—É–≤–∞–∫–∞–º —ç—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –±—ã–ª–æ –æ—á–µ–≤–∏–¥–Ω–æ —Å—Ä–∞–∑—É, –Ω–æ –º–Ωe - –Ω–µ—Ç.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/telegram/">telegram</a><a class="tag" href="https://retifrav.github.io/tags/linux/">linux</a><a class="tag" href="https://retifrav.github.io/tags/python/">python</a><a class="tag" href="https://retifrav.github.io/tags/web/">web</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <div style="border:2px orange solid; background-color: floralwhite; border-radius:0.5rem; padding: 10px 14px; font-style:italic; font-size:0.9em;">
              If you'd like to comment the article, you can do it on the
              <a href="https://decovar.dev/blog/2018/12/02/telegram-bot-webhook-ru/#remark42" style="font-weight:bold;">
                  original website</a>. This one is just a mirror without comments.
          </div>
      
      </div>
    </div>
  </div>

        <div id="footer">
          <div>
              2014 - 2023,
              <a href="/about/">retif</a>
          </div>
          <div><a href="/about/#licenses">CC BY-SA 4.0 / GPLv3</a></div>
        </div>
      </main>
      <div class="app-header">
        <div style="margin:0 0 20px;">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
            <iframe src="https://github.com/sponsors/retifrav/button"
                height="35" style="border:0;"
                title="You can sponsor me">
            </iframe>
            
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div id="telegramWidgetBlock" class="sidebar-section"></div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">–ö–ê–ö–û–ò –ñ–í–û–¢–ù–ï –í–´ –ö–£–°–ê–ò–¢–ò?</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (66)</a></li>
                  
                  <li><a href="/tags/fail">fail (39)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (36)</a></li>
                  
                  <li><a href="/tags/qt">qt (35)</a></li>
                  
                  <li><a href="/tags/review">review (28)</a></li>
                  
                  <li><a href="/tags/linux">linux (27)</a></li>
                  
                  <li><a href="/tags/devops">devops (23)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/windows">windows (19)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (17)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (15)</a></li>
                  
                  <li><a href="/tags/norway">norway (14)</a></li>
                  
                  <li><a href="/tags/irl">irl (12)</a></li>
                  
                  <li><a href="/tags/python">python (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (11)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (11)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (10)</a></li>
                  
                  <li><a href="/tags/soft">soft (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/games">games (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/apple">apple (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/russia">russia (5)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (4)</a></li>
                  
                  <li><a href="/tags/usa">usa (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/azure">azure (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (2)</a></li>
                  
                  <li><a href="/tags/steam-deck">steam-deck (2)</a></li>
                  
                  <li><a href="/tags/tvos">tvos (2)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (2)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/ldap">ldap (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/science">science (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    <script>
        const telegramBlock = document.getElementById("telegramWidgetBlock");
        window.onload = () =>
        {
            const pinnedTelegramPosts = [323]
            const randomedPostID = pinnedTelegramPosts[
                Math.floor(Math.random() * pinnedTelegramPosts.length)
            ];
            const telegramWidgetScript = document.createElement("script");
            telegramWidgetScript.src = "https://telegram.org/js/telegram-widget.js?21";
            telegramWidgetScript.dataset["telegramPost"] = `decovar/${randomedPostID}`;
            telegramWidgetScript.dataset["color"] = "1E8448";
            telegramWidgetScript.dataset["width"] = "100%";
            telegramWidgetScript.dataset["userpic"] = "false";
            telegramBlock.appendChild(telegramWidgetScript);
        }
    </script>

    
    
  </body>
</html>
