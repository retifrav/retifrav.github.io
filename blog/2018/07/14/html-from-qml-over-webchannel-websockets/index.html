<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Interacting with HTML from QML over WebChannel/WebSockets | Declaration of VAR</title>
    <link rel="canonical" href="https://decovar.dev/blog/2018/07/14/html-from-qml-over-webchannel-websockets/" />

    <meta name="generator" content="Hugo 0.83.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content="Interacting with HTML from QML over WebChannel/WebSockets" />
<meta property="og:description" content="Qt allows to create applications with so-called hybrid GUI - where you can mix native parts with HTML-based content. Such a mix even supports interaction between those native parts and HTML-side - by exposing QObjects via WebChannel and WebSockets.



    


And there are several ways of implementing that." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2018/07/14/html-from-qml-over-webchannel-websockets/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2018-07-14T16:00:55&#43;02:00" />
<meta property="article:modified_time" content="2018-07-14T16:00:55&#43;02:00" />



    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.c1a9d5434fbba746ef09ebde219b0064b5d4318930fc8463f51550f13a0e1b54.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">Interacting with HTML from QML over WebChannel/WebSockets</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2018-07-14 16:00:55 &#43;0200</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 11 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p>Qt allows to create applications with so-called <a href="http://doc.qt.io/qt-5/topics-web-content.html">hybrid GUI</a> - where you can mix native parts with HTML-based content. Such a mix even supports interaction between those native parts and HTML-side - by exposing <a href="http://doc.qt.io/qt-5/qobject.html">QObjects</a> via <a href="https://doc.qt.io/qt-5.11/qtwebchannel-index.html">WebChannel</a> and <a href="https://doc.qt.io/qt-5.11/websockets-overview.html">WebSockets</a>.</p>



    <img class="image-post" src="/blog/2018/07/14/html-from-qml-over-webchannel-websockets/images/html-qml-webchannel-websockets.png" alt="Interaction between QML and HTML">


<p>And there are several ways of implementing that.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#how-to-display-html-content">How to display HTML content</a></li>
    <li><a href="#interacting-with-html-from-qml">Interacting with HTML from QML</a>
      <ul>
        <li><a href="#webengineview---direct-webchannel">WebEngineView - direct WebChannel</a></li>
        <li><a href="#webview---webchannel-over-websockets">WebView - WebChannel over WebSockets</a>
          <ul>
            <li><a href="#mostly-c">Mostly C++</a></li>
            <li><a href="#mostly-qml">Mostly QML</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#so-whats-the-point">So, what&rsquo;s the point</a></li>
    <li><a href="#a-few-words-about-documentation">A few words about documentation</a></li>
  </ul>
</nav>
<h1 id="how-to-display-html-content">How to display HTML content</h1>
<p>First of all, here&rsquo;s how you can show HTML-content:</p>
<ol>
<li>Using <a href="http://doc.qt.io/qt-5/qml-qtwebengine-webengineview.html">WebEngineView</a>;</li>
<li>Using <a href="http://doc.qt.io/qt-5/qml-qtwebview-webview.html">WebView</a>;</li>
<li>And of course you can simply use a standalone web-browser, although in this case it won&rsquo;t be integrated in your application, obviously.</li>
</ol>
<p>All three options support communication between QML and HTML worlds, although each one does it differently. To be precise, WebEngineView does in one way, and WebView (just like a web-browser) does it another way.</p>
<p>As you might have already guessed, WebEngineView and WebView are two different things. To make it more clear:</p>
<p style="text-align:center; font-size:200%;"><span style="color:green;">WebEngineView</span> <span style="color:red;">≠</span> <span style="color:blue;">WebView</span></p>
<p><strong><span style="color:green;">WebEngineView</span></strong> is a web-view provided by Qt&rsquo;s own web-browser engine which is based on <a href="http://www.chromium.org/Home">Chromium</a> (<a href="https://doc.qt.io/qt-5.11/qtwebengine-index.html">Qt WebEngine</a>). It is a full-featured web-browser that is bundled and integrated with Qt, which is good, but at the same time it means that you need to drag it around together with your application, and this thing is quite a big one (what did you expect, it&rsquo;s almost a full-blown web-browser after all).</p>
<p><strong><span style="color:blue;">WebView</span></strong> is a, well, web-view, but the difference is that it uses a native web-browser of the platform (if available), thus it does not require including a full web-browser stack as a part of the application (which is the case with WebEngineView), so your application is more light-weight. Another point is that some platforms simply do not allow any non-system web-browsers, so WebView is the only option available there.</p>
<p>The crucial difference between WebEngineView and WebView in terms of this article is the way how Qt can communicate with HTML-content inside those views. WebEngineView provides the easiest way - directly via WebChannel, thanks to <a href="https://www.chromium.org/developers/design-documents/inter-process-communication">Chromium IPC</a> capabilities. And WebView (as well as external web-browser) requires you to establish some transport for WebChannel first.</p>
<h1 id="interacting-with-html-from-qml">Interacting with HTML from QML</h1>
<p>Okay, we can display our HTML, but how to interact with it from QML? This way or another, everything goes through <a href="http://doc.qt.io/qt-5/qml-qtwebchannel-webchannel.html">WebChannel</a>, and at HTML side it is done via special JavaScript library - <a href="http://doc.qt.io/qt-5/qtwebchannel-javascript.html">Qt WebChannel JavaScript API</a>.</p>
<p>Now let&rsquo;s see how to make it work with WebEngineView and WebView.</p>
<h2 id="webengineview---direct-webchannel">WebEngineView - direct WebChannel</h2>
<p>As I said, WebEngineView can use WebChannel directly, so this example is pretty easy. But even being an easy one (comparing with the WebSockets examples), it made me spent quite a some time to make it work. Luckily, I found this <a href="https://github.com/mattixpet/webchannel-qml-example">repository</a>, which I used as a base.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/webchannel/webchannel/main.qml">main.qml</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// an object with properties, signals and methods - just like any normal Qt object
</span><span style="color:#75715e"></span><span style="color:#a6e22e">QtObject</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">someObject</span>

    <span style="color:#75715e">// ID, under which this object will be known at WebEngineView side
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">WebChannel</span>.<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;backend&#34;</span>

    <span style="color:#a6e22e">property</span> <span style="color:#a6e22e">string</span> <span style="color:#a6e22e">someProperty</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Break on through to the other side&#34;</span>

    <span style="color:#a6e22e">signal</span> <span style="color:#a6e22e">someSignal</span>(<span style="color:#a6e22e">string</span> <span style="color:#a6e22e">message</span>);

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">changeText</span>(<span style="color:#a6e22e">newText</span>) {
        <span style="color:#a6e22e">txt</span>.<span style="color:#a6e22e">text</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newText</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;New text length: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">newText</span>.<span style="color:#a6e22e">length</span>;
    }
}

<span style="color:#a6e22e">Text</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">txt</span>
    <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Some text&#34;</span>
    <span style="color:#a6e22e">onTextChanged</span><span style="color:#f92672">:</span> {
        <span style="color:#75715e">// this signal will trigger a function at WebEngineView side (if connected)
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">someObject</span>.<span style="color:#a6e22e">someSignal</span>(<span style="color:#a6e22e">text</span>)
    }
}

<span style="color:#a6e22e">WebEngineView</span> {
    <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;qrc:/index.html&#34;</span>
    <span style="color:#a6e22e">webChannel</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">channel</span>
}

<span style="color:#a6e22e">WebChannel</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">channel</span>
    <span style="color:#a6e22e">registeredObjects</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">someObject</span>]
}</code></pre></div>
<p>So, here we create <code>WebChannel</code> and assign its ID to <code>WebEngineView</code> and register <a href="http://doc.qt.io/qt-5/qml-qtqml-qtobject.html">QtObject</a>&rsquo;s ID at the channel. Instead of <code>QtObject</code> defined at QML side you can of course have a C++/Qt object &ldquo;injected&rdquo; from C++ side.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/webchannel/webchannel/index.html">index.html</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;qrc:///qtwebchannel/qwebchannel.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span>&gt;
    <span style="color:#75715e">// here will be our QtObject from QML side
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">backend</span>;

    window.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>()
    {
        <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">QWebChannel</span>(<span style="color:#a6e22e">qt</span>.<span style="color:#a6e22e">webChannelTransport</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">channel</span>) {
            <span style="color:#75715e">// all published objects are available in channel.objects under
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// the identifier set in their attached WebChannel.id property
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">backend</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">channel</span>.<span style="color:#a6e22e">objects</span>.<span style="color:#a6e22e">backend</span>;

            <span style="color:#75715e">// connect to a signal
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someSignal</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">someText</span>) {
                <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;Got signal: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">someText</span>);
                document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;lbl&#34;</span>).<span style="color:#a6e22e">innerHTML</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">someText</span>;
            });
        });
    }

    <span style="color:#75715e">// just to demonstrate you async interaction
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ololo&#34;</span>;
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">changeLabel</span>()
    {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">textInputValue</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;input&#34;</span>).<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">trim</span>();
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">textInputValue</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">0</span>)
        {
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;You haven&#39;t entered anything!&#34;</span>);
            <span style="color:#66d9ef">return</span>;
        }

        <span style="color:#75715e">// invoke a method, and receive the return value asynchronously
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">changeText</span>(<span style="color:#a6e22e">textInputValue</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">callback</span>) {
            <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">callback</span>;
            <span style="color:#75715e">// since it&#39;s async, this alert will appear later and show the actual result
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">result</span>);
            <span style="color:#75715e">// reset variable back to default value
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ololo&#34;</span>;
        });
        <span style="color:#75715e">// this alert will appear first and show default &#34;ololo&#34;
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">result</span>);
    }

    <span style="color:#75715e">// you can also read/write properties of QtObject from QML side
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getPropertyValue</span>()
    {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">originalValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someProperty</span>;

        <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someProperty</span>);
        <span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someProperty</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;some another value&#34;</span>;
        <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someProperty</span>);

        <span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someProperty</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">originalValue</span>;
    }
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>
<p>Here you need to create a <code>QWebChannel</code> at <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload">windows.onload</a> event and get the <code>backend</code> object. After that you can call its methods, connect to its signal and access its properties.</p>
<p>Here&rsquo;s a simple demo of such communication between QML (<em>everything that&rsquo;s outside the blue rectangle</em>) and HTML (<em>the part inside the blue rectangle</em>):</p>






    <video autoplay="yes" controls="yes" loop="yes"  class="video">
        <source src="/blog/2018/07/14/html-from-qml-over-webchannel-websockets/video/qml-html.mp4" type="video/mp4">
    </video>
    
    <p class="video-fallback">If video doesn’t play in your browser, you can download it <a href="/blog/2018/07/14/html-from-qml-over-webchannel-websockets/video/qml-html.mp4">here</a></p>
    


<p>And here&rsquo;s a schema for it:</p>



    <img class="image-post" src="/blog/2018/07/14/html-from-qml-over-webchannel-websockets/images/qml-html-interaction.png" alt="Interaction between QML and HTML">


<p>By the way, interaction is done asynchronously - take a look at <code>changeLabel()</code> function and note the order of alerts.</p>
<h2 id="webview---webchannel-over-websockets">WebView - WebChannel over WebSockets</h2>
<p>WebView (and external web-browser) cannot use WebChannel directly. You need to create a <a href="https://doc.qt.io/qt-5/qml-qtwebsockets-websocketserver.html">WebSockets</a> transport first, and then use WebChannel on top of it.</p>
<p>This is something that is not possible with QML only, so you&rsquo;ll have to write some C++ code too. It&rsquo;s a bit frustrating, but more frustrating is the fact that documentation does not mention it clearly.</p>
<p>So, when I discovered that, first I decided to rework one of the C++ examples, and when I almost finished I also got an answer at Stack Overflow showing how to do almost everything in QML, so I ended up with two solutions.</p>
<p>I&rsquo;ll share both with you.</p>
<h3 id="mostly-c">Mostly C++</h3>
<p>This one has most of the work done in C++ and there is not much left for QML. It is based on the <a href="http://doc.qt.io/qt-5/qtwebchannel-standalone-example.html">Standalone Example</a>.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-cpp/websockets/main.cpp">main.cpp</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>argv[])
{
    QGuiApplication app(argc, argv);

    <span style="color:#75715e">// don&#39;t forget about this
</span><span style="color:#75715e"></span>    QtWebView<span style="color:#f92672">::</span>initialize();

    QWebSocketServer server(
                QStringLiteral(<span style="color:#e6db74">&#34;WebSockets example&#34;</span>),
                QWebSocketServer<span style="color:#f92672">::</span>NonSecureMode
                );
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>server.listen(QHostAddress<span style="color:#f92672">::</span>LocalHost, <span style="color:#ae81ff">55222</span>)) { <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>; }

    <span style="color:#75715e">// wrap WebSocket clients in QWebChannelAbstractTransport objects
</span><span style="color:#75715e"></span>    WebSocketClientWrapper clientWrapper(<span style="color:#f92672">&amp;</span>server);

    <span style="color:#75715e">// setup the channel
</span><span style="color:#75715e"></span>    QWebChannel channel;
    QObject<span style="color:#f92672">::</span>connect(<span style="color:#f92672">&amp;</span>clientWrapper, <span style="color:#f92672">&amp;</span>WebSocketClientWrapper<span style="color:#f92672">::</span>clientConnected,
                     <span style="color:#f92672">&amp;</span>channel, <span style="color:#f92672">&amp;</span>QWebChannel<span style="color:#f92672">::</span>connectTo);

    <span style="color:#75715e">// setup the core and publish it to the QWebChannel
</span><span style="color:#75715e"></span>    Backend <span style="color:#f92672">*</span>backend <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Backend();
    channel.registerObject(QStringLiteral(<span style="color:#e6db74">&#34;backend&#34;</span>), backend);

    QQmlApplicationEngine engine;
    engine.rootContext()<span style="color:#f92672">-&gt;</span>setContextProperty(<span style="color:#e6db74">&#34;someObject&#34;</span>, backend);
    engine.load(QUrl(QStringLiteral(<span style="color:#e6db74">&#34;qrc:/main.qml&#34;</span>)));
    <span style="color:#66d9ef">if</span> (engine.rootObjects().isEmpty()) { <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>; }

    <span style="color:#66d9ef">return</span> app.exec();
}</code></pre></div>
<p>Most important thing here is <code>WebSocketClientWrapper</code> (which uses <code>WebSocketTransport</code> underneath). That is something you have to implement yourself, and documentation won&rsquo;t help you much with that (thank god there is this example at least). Using <code>WebSocketClientWrapper</code> you can finally connect <code>QWebChannel</code> and register your object (<code>Backend</code> in my case, although I kept the same ID - <code>someObject</code>) so it would be available at HTML side. Note, that this time I need to register an already created C++ object (not a type), so I&rsquo;m using <a href="http://doc.qt.io/qt-5/qtqml-cppintegration-contextproperties.html">setContextProperty</a>.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-cpp/websockets/index.html">index.html</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;qrc:///qtwebchannel/qwebchannel.js&#34;</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>

<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#75715e">// here will be our QtObject from QML side
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">backend</span>;

    window.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>()
    {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">socket</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">WebSocket</span>(<span style="color:#e6db74">&#34;ws://127.0.0.1:55222&#34;</span>);

        <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">onopen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>()
        {
            <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">QWebChannel</span>(<span style="color:#a6e22e">socket</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">channel</span>) {
                <span style="color:#a6e22e">backend</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">channel</span>.<span style="color:#a6e22e">objects</span>.<span style="color:#a6e22e">backend</span>;

                <span style="color:#75715e">// connect to a signal
</span><span style="color:#75715e"></span>                <span style="color:#a6e22e">backend</span>.<span style="color:#a6e22e">someSignal</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">someText</span>) {
                    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;Got signal: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">someText</span>);
                    document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;lbl&#34;</span>).<span style="color:#a6e22e">innerHTML</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">someText</span>;
                });
            });
        };
    }
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span></code></pre></div>
<p>Unlike <code>index.html</code> from WebEngineView example, here first you need to establish <code>WebSocket</code> connection and then use it as a transport for <code>QWebChannel</code>. The rest is all the same.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-cpp/websockets/main.qml">main.qml</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">Text</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">txt</span>
    <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Some text&#34;</span>
    <span style="color:#a6e22e">onTextChanged</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">someObject</span>.<span style="color:#a6e22e">someSignal</span>(<span style="color:#a6e22e">text</span>)
    }
    <span style="color:#a6e22e">Component</span>.<span style="color:#a6e22e">onCompleted</span><span style="color:#f92672">:</span> {
         <span style="color:#a6e22e">someObject</span>.<span style="color:#a6e22e">textNeedsToBeChanged</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">changeText</span>)
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">changeText</span>(<span style="color:#a6e22e">newText</span>) {
        <span style="color:#a6e22e">txt</span>.<span style="color:#a6e22e">text</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newText</span>;
    }
}

<span style="color:#a6e22e">WebView</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">webView</span>
    <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;qrc:/index.html&#34;</span>
}</code></pre></div>
<p>QML code is a bit different too. First of all, <code>someObject</code> this time is a context property, so there is no need for importing and declaring it. Second of all, interaction between C++ object and QML components required adding one more signal (<code>textNeedsToBeChanged</code>).</p>
<p>Thus, interaction schema became a bit weird as well:</p>



    <img class="image-post" src="/blog/2018/07/14/html-from-qml-over-webchannel-websockets/images/qml-html-interaction-via-cpp.png" alt="Interaction between QML and HTML via C&#43;&#43;">


<p>Fortunately, there is a better solution.</p>
<h3 id="mostly-qml">Mostly QML</h3>
<p>I like this example more, because it&rsquo;s done mostly in QML, except for a tiny bit on C++. I got this solution as an answer to my <a href="https://stackoverflow.com/questions/51313111/qt-webview-and-webchannel-over-websockets-in-qml">question</a> at Stack Overflow.</p>
<p>First we need to implement a <a href="http://doc.qt.io/qt-5/qwebchannelabstracttransport.html">transport</a> for WebChannel.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-qml/websockets/websockettransport.h">websockettransport.h</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WebSocketTransport</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> QWebChannelAbstractTransport
{
    Q_OBJECT

<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    Q_INVOKABLE <span style="color:#66d9ef">void</span> sendMessage(<span style="color:#66d9ef">const</span> QJsonObject <span style="color:#f92672">&amp;</span>message) <span style="color:#66d9ef">override</span>
    {
        QJsonDocument <span style="color:#a6e22e">doc</span>(message);
        emit <span style="color:#a6e22e">messageChanged</span>(QString<span style="color:#f92672">::</span>fromUtf8(doc.toJson(QJsonDocument<span style="color:#f92672">::</span>Compact)));
    }

    Q_INVOKABLE <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">textMessageReceive</span>(<span style="color:#66d9ef">const</span> QString <span style="color:#f92672">&amp;</span>messageData)
    {
        QJsonParseError error;
        QJsonDocument message <span style="color:#f92672">=</span> QJsonDocument<span style="color:#f92672">::</span>fromJson(messageData.toUtf8(), <span style="color:#f92672">&amp;</span>error);
        <span style="color:#66d9ef">if</span> (error.error)
        {
            qWarning() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Failed to parse text message as JSON object:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> messageData
                       <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Error is:&#34;</span> <span style="color:#f92672">&lt;&lt;</span> error.errorString();
            <span style="color:#66d9ef">return</span>;
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>message.isObject())
        {
            qWarning() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Received JSON message that is not an object: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> messageData;
            <span style="color:#66d9ef">return</span>;
        }
        emit messageReceived(message.object(), <span style="color:#66d9ef">this</span>);
    }

signals:
    <span style="color:#66d9ef">void</span> messageChanged(<span style="color:#66d9ef">const</span> QString <span style="color:#f92672">&amp;</span> message);
};</code></pre></div>
<p>Then register it to QML.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-qml/websockets/main.cpp">main.cpp</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;websockettransport.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>argv[])
{
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    
    qmlRegisterType<span style="color:#f92672">&lt;</span>WebSocketTransport<span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;io.decovar.WebSocketTransport&#34;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;WebSocketTransport&#34;</span>);

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>And the rest is QML.</p>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-qml/websockets/main.qml">main.qml</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">decovar</span>.<span style="color:#a6e22e">WebSocketTransport</span> <span style="color:#ae81ff">1.0</span>

<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// an object with properties, signals and methods - just like any normal Qt object
</span><span style="color:#75715e"></span><span style="color:#a6e22e">QtObject</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">someObject</span>

    <span style="color:#75715e">// ID, under which this object will be known at WebEngineView side
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">WebChannel</span>.<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;backend&#34;</span>

    <span style="color:#a6e22e">property</span> <span style="color:#a6e22e">string</span> <span style="color:#a6e22e">someProperty</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Break on through to the other side&#34;</span>

    <span style="color:#a6e22e">signal</span> <span style="color:#a6e22e">someSignal</span>(<span style="color:#a6e22e">string</span> <span style="color:#a6e22e">message</span>);

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">changeText</span>(<span style="color:#a6e22e">newText</span>) {
        <span style="color:#a6e22e">txt</span>.<span style="color:#a6e22e">text</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newText</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;New text length: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">newText</span>.<span style="color:#a6e22e">length</span>;
    }
}

<span style="color:#a6e22e">WebSocketTransport</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">transport</span>
}

<span style="color:#a6e22e">WebSocketServer</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">server</span>
    <span style="color:#a6e22e">listen</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
    <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">55222</span>
    <span style="color:#a6e22e">onClientConnected</span><span style="color:#f92672">:</span> {
        <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">webSocket</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">WebSocket</span>.<span style="color:#a6e22e">Open</span>) {
            <span style="color:#a6e22e">channel</span>.<span style="color:#a6e22e">connectTo</span>(<span style="color:#a6e22e">transport</span>)
            <span style="color:#a6e22e">webSocket</span>.<span style="color:#a6e22e">onTextMessageReceived</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">transport</span>.<span style="color:#a6e22e">textMessageReceive</span>)
            <span style="color:#a6e22e">transport</span>.<span style="color:#a6e22e">onMessageChanged</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">webSocket</span>.<span style="color:#a6e22e">sendTextMessage</span>)
        }
    }
}

<span style="color:#a6e22e">Text</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">txt</span>
    <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Some text&#34;</span>
    <span style="color:#a6e22e">onTextChanged</span><span style="color:#f92672">:</span> {
        <span style="color:#75715e">// this signal will trigger a function at WebView side (if connected)
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">someObject</span>.<span style="color:#a6e22e">someSignal</span>(<span style="color:#a6e22e">text</span>)
    }
}

<span style="color:#a6e22e">WebView</span> {
    <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;qrc:/index.html&#34;</span>
}

<span style="color:#a6e22e">WebChannel</span> {
    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">channel</span>
    <span style="color:#a6e22e">registeredObjects</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">someObject</span>]
}</code></pre></div>
<p><a href="https://github.com/retifrav/qml-webchannel-websockets/blob/master/websockets-mostly-qml/websockets/index.html">index.html</a> here is the same as in previous example. Create a <code>WebSocket</code> and use it as a transport for <code>QWebChannel</code>.</p>
<p>By the way, as I told you in the earlier, WebView and standalone/external browser are the same thing, so you can just open this <code>index.html</code> in your web-browser and it will work the same way  - just don&rsquo;t forget to remove <code>qrc:/</code> from code and copy <code>qwebchannel.js</code> to the same folder.</p>
<p>The full source code for all three examples can be found in this <a href="https://github.com/retifrav/qml-webchannel-websockets">repository</a>.</p>
<h1 id="so-whats-the-point">So, what&rsquo;s the point</h1>
<p>Okay, we can interact between HTML (running inside a WebEngineView/WebView/web-browser) and QML (or rather proper QObjects from C++ side). But why? What is the point of this? What problem does it solve?</p>
<p><em>I have no fucking clue</em>. In my opinion, that was a stupid idea in the first place.</p>
<p>You want to have an HTML-based GUI? Why use Qt at all then? Just take any of bazillion web-frameworks and run everything in browser. Or go totally mental and create <a href="/blog/2018/05/18/etcher-200mb-to-dd/">applications with a size of 200 MB</a> for running console utilities.</p>
<p>You need a client for your remote backend? Do it with Qt Quick, it even has <a href="/blog/2018/06/09/qml-xmlhttprequest/">XMLHttpRequest</a> out of the box. And it will perform <a href="https://youtu.be/Z4CwVN9RRbE">much better</a> than HTML-based equivalent.</p>
<p>But why on earth would you need to have HTML-content integrated into your Qt application? I seriously don&rsquo;t understand.</p>
<h1 id="a-few-words-about-documentation">A few words about documentation</h1>
<p>The whole thing is quite poorly documented. I spent around one week going back and forth, trying to make things work, and now I&rsquo;m not even angry - I&rsquo;m fascinated.</p>
<p>Qt WebChannel appeared somewhere in Qt 5.4, and here&rsquo;s a <a href="https://youtu.be/KnvnTi6XafA">video</a> from Qt Developer Days 2014 about that. Some examples from this video are nowhere to find, and presenter used features that are not part of the Qt (could not be found in the documentation). Same stuff is happening in this <a href="https://www.kdab.com/qt-webchannel-bridging-gap-cqml-web/">article</a>. Sure, those are old materials, and experimental features were changed by the release, but how can we do these things in the released version, where is documentation for that? Because now it really looks like quite a gap - from experimental to?.. To what?</p>
<p>Here&rsquo;s a good resume for both their video and article:</p>



    <img class="image-post" src="/blog/2018/07/14/html-from-qml-over-webchannel-websockets/images/comment.png" alt="The state of Qt documentation">


<p>Sadly this comment is removed now.</p>
<p>No, but seriously, why so many things are not explained in the documentation? Why, despite the fact that there are more than 5 examples for both WebChannel and WebSockets, it is so hard to understand how it works? And why there is no a single example of making it work with QML?</p>
<p>Now, regarding <code>qwebchannel.js</code>. Take a look at the very first paragraph of the <a href="http://doc.qt.io/qt-5/qtwebchannel-javascript.html">documentation page</a>:</p>
<blockquote>To communicate with a QWebChannel or WebChannel, a client must use and set up the JavaScript API provided by qwebchannel.js. For clients run inside Qt WebEngine, you can load the file via qrc:///qtwebchannel/qwebchannel.js. For external clients, you need to copy the file to your web server.</blockquote>
<p>So, for integrated web-views we can use a special resource <code>qrc:///qtwebchannel/qwebchannel.js</code>, but where can we find this file for external clients? Yeah, get fucked, because this file is nowhere to find on this or any other page. Fortunately, you can take it (hopefully, the same one) from some of the examples: <a href="https://doc.qt.io/qt-5/qtwebengine-webenginewidgets-markdowneditor-resources-qwebchannel-js.html">qwebchannel.js</a>.</p>
<p><a href="http://doc.qt.io/qt-5/qwebchannelabstracttransport.html">QWebChannelAbstractTransport</a>&rsquo;s documentation page is also far from being called a detailed one as it does not have a single line of code, not to say about examples. Its necessity for WebChannel is <a href="http://doc.qt.io/qt-5/qwebchannel.html#QWebChannel">briefly mentioned</a> in a casual way like this:</p>
<blockquote>Note that a QWebChannel is only fully operational once you connect it to a QWebChannelAbstractTransport.</blockquote>
<p>Thanks a lot for the hint, but would you care to elaborate a bit? No? Oh well.</p>
<p>Basically, if it wasn&rsquo;t for the repository I found and the help I got at Stack Overflow - I simply wouldn&rsquo;t be able to make everything work.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/qt/">qt</a><a class="tag" href="https://retifrav.github.io/tags/web/">web</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <script>
  var id =  19 ;

  if (id)
  {
    let url = "https://github.com/retifrav/retifrav.github.io/issues/".concat(id);
    let api_url = "https://api.github.com/repos/retifrav/retifrav.github.io/issues/".concat(id, "/comments");
    
    var commentsDiv = document.getElementById("comments");

    let xhr = new XMLHttpRequest();
    xhr.responseType = "json";
    xhr.open("GET", api_url);
    xhr.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
    xhr.send();

    xhr.onload = function()
    {
      if (xhr.status != 200)
      {
        let errorText = document.createElement("p");
        errorText.innerHTML = "<i>Comments for this post yet are not opened yet (or you have GitHub scripts disabled).</i>";
        commentsDiv.appendChild(errorText);
      }
      else
      {
        let comments = xhr.response;

        let mainHeader = document.createElement("h2");
        mainHeader.innerHTML = "Comments: ".concat(comments.length);
        commentsDiv.appendChild(mainHeader);

        let issueLink = document.createElement("p");
        issueLink.innerHTML = "<i>You can leave a comment using this <a href='".concat(url, "'>GitHub issue</a>.</i>");
        commentsDiv.appendChild(issueLink);
        
        comments.forEach(function(comment)
        {
            let commentContent = document.createElement("div");
            commentContent.setAttribute('class', 'gh-comment')
            commentContent.innerHTML = "".concat(
                "<div class='gh-header'>",
                  "<img src='", comment.user.avatar_url, "' />",
                  "<div style='margin:auto 0;'>",
                    "<b><a class='gh-username' href='", comment.user.html_url, "'>", comment.user.login, "</a></b>",
                    " commented at <em>", new Date(comment.created_at), "</em>",
                  "</div>",
                "</div>",
                "<div class='gh-body'>",
                  comment.body_html,
                "</div>"
            );
            commentsDiv.appendChild(commentContent);
        });
      }
    };

    xhr.onerror = function()
    {
      let errorText = document.createElement("p");
      errorText.innerHTML = "<i>Some error loading comments.</i>";
      commentsDiv.appendChild(errorText);
    };
  }
</script>

      
      </div>
    </div>
  </div>

        <div id="footer">
          <div>
              2014-2021,
              <a href="/about/">retif</a>
          </div>
          <div><a href="/about/#licenses">CC BY-SA 4.0 / GPLv3</a></div>
        </div>
      </main>
      <div class="app-header">
        <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
        
        <div class="sidebar-section">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <div id="telegram" class="sidebar-section">
              <script async src="https://telegram.org/js/telegram-widget.js?5" data-telegram-post="decovar/297" data-width="100%" data-userpic="false"></script>
            </div>
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">КАКОИ ЖВОТНЕ ВЫ КУСАИТИ?</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>Top</h3>
                <ul class="sidebar-list">
                    <li><a href="/top/cider">Cider</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (59)</a></li>
                  
                  <li><a href="/tags/fail">fail (37)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (35)</a></li>
                  
                  <li><a href="/tags/qt">qt (31)</a></li>
                  
                  <li><a href="/tags/review">review (26)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/linux">linux (20)</a></li>
                  
                  <li><a href="/tags/devops">devops (19)</a></li>
                  
                  <li><a href="/tags/windows">windows (18)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (16)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (13)</a></li>
                  
                  <li><a href="/tags/norway">norway (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/python">python (10)</a></li>
                  
                  <li><a href="/tags/soft">soft (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (6)</a></li>
                  
                  <li><a href="/tags/games">games (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (5)</a></li>
                  
                  <li><a href="/tags/apple">apple (4)</a></li>
                  
                  <li><a href="/tags/russia">russia (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (3)</a></li>
                  
                  <li><a href="/tags/usa">usa (3)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/irl">irl (1)</a></li>
                  
                  <li><a href="/tags/microsoft">microsoft (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    
    
  </body>
</html>
