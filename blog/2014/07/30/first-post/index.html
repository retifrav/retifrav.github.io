<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Создание блога на Octopress | Declaration of VAR</title>

    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content="Создание блога на Octopress" />
<meta property="og:description" content="Первый пост будет, конечно же, о том, как я ставил и настраивал этот блог.
Всё работает на фреймворке Octopress для Jekyll. Почитать, что это такое, можно тут и здесь." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2014/07/30/first-post/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2014-07-30T03:07:22&#43;04:00" />
<meta property="article:modified_time" content="2014-07-30T03:07:22&#43;04:00" />



    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.c1a9d5434fbba746ef09ebde219b0064b5d4318930fc8463f51550f13a0e1b54.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">Создание блога на Octopress</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2014-07-30 03:07:22 &#43;0400</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 5 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p>Первый пост будет, конечно же, о том, как я ставил и настраивал этот блог.</p>
<p>Всё работает на фреймворке <a href="http://octopress.org/">Octopress</a> для <a href="http://jekyllrb.com/">Jekyll</a>. Почитать, что это такое, можно <a href="http://habrahabr.ru/post/133261/">тут</a> и <a href="http://habrahabr.ru/post/207650/">здесь</a>.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#установка">Установка</a>
      <ul>
        <li><a href="#windows">Windows</a></li>
        <li><a href="#mac-os">Mac OS</a></li>
      </ul>
    </li>
    <li><a href="#запуск">Запуск</a></li>
    <li><a href="#настройка-octopress">Настройка Octopress</a>
      <ul>
        <li><a href="#подсветка-синтаксиса">Подсветка синтаксиса</a></li>
        <li><a href="#rss">RSS</a></li>
      </ul>
    </li>
    <li><a href="#как-постить">Как постить</a></li>
  </ul>
</nav>
<h1 id="установка">Установка</h1>
<p>Вот инструкции, которыми я пользовался:</p>
<ul>
<li><a href="http://www.techelex.org/setup-octopress-on-windows7/"><a href="http://www.techelex.org/setup-octopress-on-windows7/">http://www.techelex.org/setup-octopress-on-windows7/</a></a> - установка Ruby в среде Windows и настройка фреймворка;</li>
<li><a href="http://schuyler.info/blog/how-to-setup-a-new-octopress-blog-on-github-pages.html"><a href="http://schuyler.info/blog/how-to-setup-a-new-octopress-blog-on-github-pages.html">http://schuyler.info/blog/how-to-setup-a-new-octopress-blog-on-github-pages.html</a></a> - настройка и собственный домен;</li>
<li><a href="http://webdesign.tutsplus.com/tutorials/getting-started-with-octopress--webdesign-11442"><a href="http://webdesign.tutsplus.com/tutorials/getting-started-with-octopress--webdesign-11442">http://webdesign.tutsplus.com/tutorials/getting-started-with-octopress--webdesign-11442</a></a> - ещё пара деталей по настройке и кастомизации.</li>
</ul>
<h2 id="windows">Windows</h2>
<p>Официального манула в списке нет, а я обычный вендопользователь, потому вот моя инструкция для Windows 8.1 x64 (но подойдёт для любой, я думаю). Хотя, &ldquo;моя&rdquo; - громко сказано, так как она почти полностью повторяет первый источник из приведённых выше.</p>
<p>Желательно всё ставить по пути без пробелов и кириллицы. Все настройки в установщиках более-менее по умолчанию, если вы не шарите что куда. Я бы только советовал убрать встраивание команд <code>Git</code> в контекстное меню Windows и создание всяких ярлыков. Если где-то будут спрашивать про редактирование системной переменной <code>PATH</code> - непременно соглашайтесь. Если не спросят, то проверьте, чтобы в ней оказались пути до <code>Git</code> и <code>Ruby</code>.</p>
<ol>
<li>Поставить <a href="http://git-scm.com/" target="_blank">Git</a>. Я ставил по пути <code>D:\Programs\Git\</code></li>
<li>Поставить <a href="http://rubyinstaller.org/downloads/" target="_blank">Ruby</a>. Я ставил по пути <code>D:\Programs\Ruby\</code></li>
<li>Загрузить <a href="http://rubyinstaller.org/downloads/" target="_blank">Development Kit</a> для Ruby. Архив можно распаковать туда же, куда ставили Ruby, только создать для него дополнительную папку. Я распаковал по пути <code>D:\Programs\Ruby\DevKit\</code></li>
<li>Поставить <a href="http://www.activestate.com/activepython/downloads" target="_blank">ActivePython</a> - будет нужно для подсветки синтаксиса. В ряде манулов об этом не пишут, видимо, подразумевается, что у всех и так есть. Также обратите внимание, что нужна версия 2.7.x или какая там будет второй ветки, потому что с 3.x веткой работать не будет.</li>
</ol>
<p>Теперь создайте где-то каталог, в котором будут лежать файлы вашего блога. У меня это здесь: <code>D:\code\www\blog\</code></p>
<p>Открываем <code>cmd.exe</code> и разворачиваем <code>Development Kit</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd"><span style="color:#66d9ef">cd</span> D:\Programs\Ruby\DevKit\
ruby dk.rb init
ruby dk.rb install</code></pre></div>
<p>Так как <code>Git</code> уже установлен, то путь к его бинарникам должен быть в переменной <code>PATH</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd"><span style="color:#66d9ef">cd</span> D:\code\www\blog\
# замените ТВОЙАДРЕС на username.github.com (username тоже поменять, разумеется)
git clone git://github.com/imathis/octopress.git ТВОЙАДРЕС
<span style="color:#66d9ef">cd</span> ТВОЙАДРЕС
gem install bundler
bundle install
rake install</code></pre></div>
<h2 id="mac-os">Mac OS</h2>
<p>Сначала Git. Открыть терминал и выполнить команду:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git --version</code></pre></div>
<p>Если Git не установлен, то система предложит поставить <code>Xcode Command Line Tools</code>. Ставим его, Git появляется.</p>
<p>Ставим <a href="http://brew.sh">Homebrew</a> (там написано, как). Ставим Ruby. Точнее, оно уже стоит, скорее всего, но тем не менее, обновляем тогда до актуальной версии:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install rbenv ruby-build rbenv-gem-rehash
rbenv install 2.3.0
rbenv global 2.3.0
ruby -v</code></pre></div>
<p>Хотя когда я потом пробовал ставить то же самое, оно мне выругалось на <code>rbenv-gem-rehash</code>, так что я его просто удалил из этого списка.</p>
<p>Кстати, а почему именно 2.3.0? Ну просто тогда это был самый последний. Если хотите актуальный, то выполните <code>rbenv install -l</code>, чтобы посмотреть, какой там щас.</p>
<p>Ставим вот такую штуку:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gem install bundler
rbenv rehash</code></pre></div>
<p>Создаём каталог для блога <code>~/Documents/www</code> и переходим в него. Ставим Octopress:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone git://github.com/imathis/octopress.git ТВАЁИМЯ.github.io</code></pre></div>
<p>Теперь:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd ТВАЁИМЯ.github.io
bundle install
rake install</code></pre></div>
<h1 id="запуск">Запуск</h1>
<p>Идём на <a href="https://github.com/">GitHub</a> и создаём новый репозиторий с названием <code>ТВАЁИМЯ.github.io</code>. Клонируем его в <code>ТВАЁИМЯ.github.io/_deploy/</code> (вернувшись обратно в корневой каталог блога):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd ..
git clone https://github.com/ТВАЁИМЯ/ТВАЁИМЯ.github.io.git _deploy</code></pre></div>
<p>Оно скопирует ваш репозиторий блога в эту папку. Теперь выполняем команды:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">rake setup_github_pages
rake generate
rake deploy</code></pre></div>
<p>Оно сгенерирует страницы блога и сложит их в <code>ТВАЁИМЯ.github.io/_deploy/</code>, а также попытается выполнить коммит в ваш репозиторий и отправить всё на сервер. Если оно этого не сделает (не сможет выполнить <code>git push</code>), то надо будет сделать это вручную (находясь в каталоге <code>/ТВАЁИМЯ.github.com/_deploy</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd _deploy
git add .
git commit -m <span style="color:#e6db74">&#39;your message&#39;</span>
git push origin master</code></pre></div>
<p>Или как-то так. Помню, в прошлый раз я что-то там тоже мудрил не с первого раза.</p>
<p>Ваш блог станет доступен по адресу <code>https://ТВАЁИМЯ.github.io</code> через пару минут.</p>
<h1 id="настройка-octopress">Настройка Octopress</h1>
<p>Основные настройки хранятся в файле <code>_config.yml</code> в корне. Там парой взмахов можно прилепить к блоку каменты и всякую социальную хрень.</p>
<p>Там же можно настроить формат даты, если не нравится предлагаемый по умолчанию. Я взял такой:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">date_format</span>: <span style="color:#e6db74">&#34;%d.%m.%Y&#34;</span></code></pre></div>
<p>Ну и, конечно, поменяйте название и подзаголовок блога.</p>
<h2 id="подсветка-синтаксиса">Подсветка синтаксиса</h2>
<p>Вот тут всё пошло плохо. Из коробки она работать отказалась. На <strong>Stack Overflow</strong> рекомендовали откатываться на <code>pygments</code> версии 0.5.0, тогда как сейчас актуальная 0.6.0. В общем, я попробовал, не помогло, и тогда вернул обратно свежую. Через некоторое время выяснилось, что должен быть установлен <code>Python</code>, как писалось выше.</p>
<p>После его установки подсветка синтаксиса языков заработала, но проблемы на этом не закончись, и решить их не удалось:</p>
<ul>
<li>не отображаются номера строк (ни сначала, ни <code>start:22</code>);</li>
<li>не работает подсветка указанных строк (параметр <code>mark:52,54-55</code>, например);</li>
<li>не включается светлая схема.</li>
</ul>
<p>Через некоторое время я перешёл на другую <a href="/blog/2014/12/06/syntax-highlight/">систему подсветки синтаксиса</a>.</p>
<h2 id="rss">RSS</h2>
<p>По умолчанию в RSS-ленту попадает вся статья целиком, что неправильно - в RSS должны попадать только заголовки или хотя бы первые абзацы статей. Однако, тут такое предусмотрено: для этого в статьях используется разделитель <code>&lt;!--more--&gt;</code>, который следует ставить после первого абзаца. Но этого недостаточно, нужно ещё во всех (потому что я не знаю, в каком точно) файлах <code>atom.xml</code> поменять значения <code>post.content</code> на <code>post.excerpt</code>.</p>
<p>На этом всё, остальное можно прочитать в массе источников.</p>
<h1 id="как-постить">Как постить</h1>
<p>Забыл сказать, что вообще все операции делаются через терминал. Создание новых постов тоже:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># если сегодня 30.07.2014, создаёт файл source/_posts/2014-07-30-mah-first-post.markdown</span>
rake new_post<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;Mah first post&#34;</span><span style="color:#f92672">]</span></code></pre></div>
<p>Этот файл теперь можно открыть и написать в нём пост. Используется разметка <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a>, но никто не запрещает пилить с <code>HTML</code>.</p>
<p>Когда закончите написание, сохраните файл и выполните команды:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># сборка блога из исходников, включая новые страницы, посты</span>
rake generate
<span style="color:#75715e"># запускает веб-сервер на 4000 порту (http://localhost:4000/) для предпросмотра (CTRL+C останавливает)</span>
rake preview
<span style="color:#75715e"># копирует собранный блог в каталог публикации, выполняет коммит и отправляет на сервер</span>
rake deploy</code></pre></div>
<p>Можно идти смотреть в сети по адресу блога.</p>
<hr class="updates-divider"/>
<div class="alert alert-info"><strong>[24.03.2019] Update:</strong> Переезд на Hugo</div>
<p>По ряду причин я решил <a href="/blog/2019/03/17/migrating-from-octopress-to-hugo/">переехать на Hugo</a>.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/octopress/">octopress</a><a class="tag" href="https://retifrav.github.io/tags/web/">web</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "waspenterprises" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      </div>
    </div>
  </div>

        <div id="footer">
          Copyright &copy; 2014-2021 <a href="/about/">retif</a>
        </div>
      </main>
      <div class="app-header">
        <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
        
        <div class="sidebar-section">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <div id="telegram" class="sidebar-section">
              <script async src="https://telegram.org/js/telegram-widget.js?5" data-telegram-post="decovar/279" data-width="100%" data-userpic="false"></script>
            </div>
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">КАКОИ ЖВОТНЕ ВЫ КУСАИТИ?</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>Top</h3>
                <ul class="sidebar-list">
                    <li><a href="/top/cider">Cider</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (58)</a></li>
                  
                  <li><a href="/tags/fail">fail (37)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (35)</a></li>
                  
                  <li><a href="/tags/qt">qt (31)</a></li>
                  
                  <li><a href="/tags/review">review (26)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/linux">linux (19)</a></li>
                  
                  <li><a href="/tags/devops">devops (18)</a></li>
                  
                  <li><a href="/tags/windows">windows (18)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (16)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (13)</a></li>
                  
                  <li><a href="/tags/norway">norway (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/python">python (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/soft">soft (9)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (6)</a></li>
                  
                  <li><a href="/tags/games">games (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (5)</a></li>
                  
                  <li><a href="/tags/apple">apple (4)</a></li>
                  
                  <li><a href="/tags/russia">russia (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (3)</a></li>
                  
                  <li><a href="/tags/usa">usa (3)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/irl">irl (1)</a></li>
                  
                  <li><a href="/tags/microsoft">microsoft (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    
    
  </body>
</html>
