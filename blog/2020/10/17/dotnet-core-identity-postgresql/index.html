<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>.NET Core Identity with PostgreSQL | Declaration of VAR</title>
    <link rel="canonical" href="https://decovar.dev/blog/2020/10/17/dotnet-core-identity-postgresql/" />

    <meta name="generator" content="Hugo 0.86.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content=".NET Core Identity with PostgreSQL" />
<meta property="og:description" content="A couple of years ago I wrote a post about setting up Identity in .NET Core MVC application with MySQL. Now I am starting a new project, and this time I want to try using PostgreSQL.



    


It is also a good timing to prepare for the upcoming .NET 5, which is about to release next month, so I decided to do it with .NET 5.0 RC2 right away." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2020/10/17/dotnet-core-identity-postgresql/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2020-10-17T13:32:15+02:00" />
<meta property="article:modified_time" content="2020-10-17T13:32:15+02:00" />



    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.c1a9d5434fbba746ef09ebde219b0064b5d4318930fc8463f51550f13a0e1b54.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div style="background-color:orange; padding:4px 16px; font-size:0.8em; text-align:center; font-style:italic;">
        On 19.05.2021 the website was moved to
        <a href="https://decovar.dev/blog/2020/10/17/dotnet-core-identity-postgresql/" style="color:black; font-weight:bold;">
            https://decovar.dev/</a>. This is just a mirror now.
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">.NET Core Identity with PostgreSQL</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2020-10-17 13:32:15 &#43;0200</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 7 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p>A couple of years ago I wrote <a href="/blog/2018/03/20/csharp-dotnet-core-identity-mysql/">a post</a> about setting up Identity in .NET Core MVC application with MySQL. Now I am starting a new project, and this time I want to try using PostgreSQL.</p>



    <img class="image-post" src="/blog/2020/10/17/dotnet-core-identity-postgresql/images/dotnet-core-identity-postgresql.png" alt=".NET Core Identity PostgreSQL">


<p>It is also a good timing to prepare for the upcoming <a href="https://devblogs.microsoft.com/dotnet/introducing-net-5/">.NET 5</a>, which is about to release next month, so I decided to do it with <a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0-rc-2/">.NET 5.0 RC2</a> right away.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#environment">Environment</a></li>
    <li><a href="#postgresql-database">PostgreSQL database</a></li>
    <li><a href="#net-core-mvc-project">.NET Core MVC project</a>
      <ul>
        <li><a href="#scaffolding-identity-code">Scaffolding Identity code</a></li>
      </ul>
    </li>
  </ul>
</nav>
<h1 id="environment">Environment</h1>
<p>The previous post was written in times of <strong>.NET Core 2.0</strong> and <strong>2.1</strong>, but most of the things are pretty much the same (<em>or even easier</em>) now with <strong>.NET 5</strong>. Also, I&rsquo;m doing everything on Mac OS, but yet again it will be all the same on other platforms too.</p>
<p>My environment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sw_vers -productVersion
10.15.7

$ brew --version
Homebrew 2.5.6-61-g7f422af
Homebrew/homebrew-core <span style="color:#f92672">(</span>git revision e837e; last commit 2020-10-16<span style="color:#f92672">)</span>
Homebrew/homebrew-cask <span style="color:#f92672">(</span>git revision dc3b6; last commit 2020-10-16<span style="color:#f92672">)</span>

$ dotnet --info
.NET SDK <span style="color:#f92672">(</span>reflecting any global.json<span style="color:#f92672">)</span>:
 Version:   5.0.100-rc.2.20479.15
 Commit:    da7dfa8840

Runtime Environment:
 OS Name:     Mac OS X
 OS Version:  10.15
 OS Platform: Darwin
 RID:         osx.10.15-x64
 Base Path:   /usr/local/share/dotnet/sdk/5.0.100-rc.2.20479.15/

Host <span style="color:#f92672">(</span>useful <span style="color:#66d9ef">for</span> support<span style="color:#f92672">)</span>:
  Version: 5.0.0-rc.2.20475.5
  Commit:  c5a3f49c88

.NET SDKs installed:
  ...
  5.0.100-rc.2.20479.15 <span style="color:#f92672">[</span>/usr/local/share/dotnet/sdk<span style="color:#f92672">]</span>

.NET runtimes installed:
  ...
  Microsoft.AspNetCore.App 5.0.0-rc.2.20475.17 <span style="color:#f92672">[</span>/usr/local/share/dotnet/shared/Microsoft.AspNetCore.App<span style="color:#f92672">]</span>
  ...
  Microsoft.NETCore.App 5.0.0-rc.2.20475.5 <span style="color:#f92672">[</span>/usr/local/share/dotnet/shared/Microsoft.NETCore.App<span style="color:#f92672">]</span></code></pre></div>
<h1 id="postgresql-database">PostgreSQL database</h1>
<p>You can install PostgreSQL on Mac OS using Homebrew:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ brew install postgresql
$ postgres <span style="color:#f92672">--</span>version
postgres <span style="color:#f92672">(</span><span style="color:#a6e22e">PostgreSQL</span><span style="color:#f92672">)</span> <span style="color:#ae81ff">13.0</span></code></pre></div>
<p>Check if your user owns the folders where you&rsquo;ll put the database. If not, switch to admin and make yourself the owner:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ ls <span style="color:#f92672">-</span>l <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span><span style="color:#66d9ef">var</span>
$ su admin
$ sudo chown <span style="color:#f92672">-</span>R yourname<span style="color:#66d9ef">:</span><span style="color:#66d9ef">staff</span> <span style="color:#66d9ef">/usr/local/var</span>
$ exit</code></pre></div>
<p>Initiate the database(s) folder, start PostgreSQL, login via <code>psql</code> and create a database for your application:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ initdb <span style="color:#f92672">--</span>locale<span style="color:#66d9ef">=</span>C <span style="color:#f92672">-</span>E <span style="color:#a6e22e">UTF</span><span style="color:#f92672">-</span><span style="color:#ae81ff">8</span> <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span><span style="color:#66d9ef">var</span><span style="color:#f92672">/</span>postgres
$ pg_ctl <span style="color:#f92672">-</span>D <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span><span style="color:#66d9ef">var</span><span style="color:#f92672">/</span>postgres start
$ psql postgres

postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> <span style="color:#a6e22e">CREATE</span> <span style="color:#a6e22e">DATABASE</span> <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span><span style="color:#f92672">;</span>
postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \l
                         <span style="color:#a6e22e">List</span> of databases
   <span style="color:#a6e22e">Name</span>        <span style="color:#f92672">|</span> <span style="color:#a6e22e">Owner</span>    <span style="color:#f92672">|</span> <span style="color:#a6e22e">Encoding</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Collate</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Ctype</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Access</span> privileges
<span style="color:#f92672">---------------+----------+----------+---------+-------+-------------------</span>
 <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span> <span style="color:#f92672">|</span> yourname <span style="color:#f92672">|</span> <span style="color:#a6e22e">UTF8</span>     <span style="color:#f92672">|</span> C       <span style="color:#f92672">|</span> C     <span style="color:#f92672">|</span>
 postgres      <span style="color:#f92672">|</span> yourname <span style="color:#f92672">|</span> <span style="color:#a6e22e">UTF8</span>     <span style="color:#f92672">|</span> C       <span style="color:#f92672">|</span> C     <span style="color:#f92672">|</span>
 template0     <span style="color:#f92672">|</span> yourname <span style="color:#f92672">|</span> <span style="color:#a6e22e">UTF8</span>     <span style="color:#f92672">|</span> C       <span style="color:#f92672">|</span> C     <span style="color:#f92672">|</span> <span style="color:#66d9ef">=</span>c<span style="color:#f92672">/</span>yourname         <span style="color:#f92672">+</span>
               <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span> yourname<span style="color:#66d9ef">=</span><span style="color:#a6e22e">CTc</span><span style="color:#f92672">/</span>yourname
 template1     <span style="color:#f92672">|</span> yourname <span style="color:#f92672">|</span> <span style="color:#a6e22e">UTF8</span>     <span style="color:#f92672">|</span> C       <span style="color:#f92672">|</span> C     <span style="color:#f92672">|</span> <span style="color:#66d9ef">=</span>c<span style="color:#f92672">/</span>yourname         <span style="color:#f92672">+</span>
               <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span> yourname<span style="color:#66d9ef">=</span><span style="color:#a6e22e">CTc</span><span style="color:#f92672">/</span>yourname
<span style="color:#f92672">(</span><span style="color:#ae81ff">4</span> rows<span style="color:#f92672">)</span></code></pre></div>
<p>If you want to run it as a service (<em>instead of starting it with <code>pg_ctl</code></em>), you can <a href="https://docs.brew.sh/Manpage#services-subcommand">use Homebrew</a> for that too:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ brew services list
<span style="color:#a6e22e">Name</span>       <span style="color:#a6e22e">Status</span>  <span style="color:#a6e22e">User</span> <span style="color:#a6e22e">Plist</span>
ipfs       stopped
lighttpd   stopped
postgresql stopped
unbound    stopped

$ brew services start postgresql</code></pre></div>
<p>Create a password for your user and find where the <code>pg_hba.conf</code> lives:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \password
<span style="color:#a6e22e">Enter</span> <span style="color:#66d9ef">new</span> password<span style="color:#66d9ef">:</span>
<span style="color:#66d9ef">Enter</span> <span style="color:#66d9ef">it</span> <span style="color:#66d9ef">again:</span>

postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> <span style="color:#a6e22e">SHOW</span> hba_file<span style="color:#f92672">;</span>
              hba_file
<span style="color:#f92672">-------------------------------------</span>
 <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span><span style="color:#66d9ef">var</span><span style="color:#f92672">/</span>postgres<span style="color:#f92672">/</span>pg_hba<span style="color:#f92672">.</span>conf

postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \q</code></pre></div>
<p>Edit that file (<code>/usr/local/var/postgres/pg_hba.conf</code>) to disable logging-in without passwords:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e"># TYPE  DATABASE        USER            ADDRESS                 METHOD</span>

<span style="color:#75715e"># &#34;local&#34; is for Unix domain socket connections only</span>
local   all             all                                     md5
<span style="color:#75715e"># IPv4 local connections:</span>
host    all             all             127.0.0.1/32            md5
<span style="color:#75715e"># IPv6 local connections:</span>
host    all             all             ::1/128                 md5
<span style="color:#75715e"># Allow replication connections from localhost, by a user with the</span>
<span style="color:#75715e"># replication privilege.</span>
local   replication     all                                     md5
host    replication     all             127.0.0.1/32            md5
host    replication     all             ::1/128                 md5</code></pre></div>
<p>Restart Postgres, login back (<em>this time it will ask you for password</em>), connect to <code>SOME-DATABASE</code> and create an application user:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ pg_ctl <span style="color:#f92672">-</span>D <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span><span style="color:#66d9ef">var</span><span style="color:#f92672">/</span>postgres restart <span style="color:#66d9ef">#</span> or brew services restart postgresql
$ psql postgres

postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \c <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span>
<span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span><span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> <span style="color:#a6e22e">CREATE</span> <span style="color:#a6e22e">USER</span> birdperson <span style="color:#a6e22e">WITH</span> <span style="color:#a6e22e">ENCRYPTED</span> <span style="color:#a6e22e">PASSWORD</span> &#39;SOME<span style="color:#f92672">-</span><span style="color:#a6e22e">PASSWORD</span><span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">;</span>
<span style="color:#a6e22e">CREATE</span> <span style="color:#a6e22e">ROLE</span>
<span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span><span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> <span style="color:#a6e22e">GRANT</span> <span style="color:#a6e22e">ALL</span> <span style="color:#a6e22e">PRIVILEGES</span> <span style="color:#a6e22e">ON</span> <span style="color:#a6e22e">DATABASE</span> <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span> <span style="color:#a6e22e">TO</span> birdperson<span style="color:#f92672">;</span>
<span style="color:#a6e22e">GRANT</span>
<span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span><span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \du
                                    <span style="color:#a6e22e">List</span> of roles
 <span style="color:#a6e22e">Role</span> name  <span style="color:#f92672">|</span>                         <span style="color:#a6e22e">Attributes</span>                         <span style="color:#f92672">|</span> <span style="color:#a6e22e">Member</span> of
<span style="color:#f92672">------------+------------------------------------------------------------+-----------</span>
 yourname   <span style="color:#f92672">|</span> <span style="color:#a6e22e">Superuser</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Create</span> role<span style="color:#f92672">,</span> <span style="color:#a6e22e">Create</span> <span style="color:#a6e22e">DB</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Replication</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Bypass</span> <span style="color:#a6e22e">RLS</span> <span style="color:#f92672">|</span> <span style="color:#f92672">{}</span>
 birdperson <span style="color:#f92672">|</span>                                                            <span style="color:#f92672">|</span> <span style="color:#f92672">{}</span></code></pre></div>
<p>The database is ready, let&rsquo;s now create a .NET Core MVC project.</p>
<h1 id="net-core-mvc-project">.NET Core MVC project</h1>
<p>Create new MVC project with <code>Individual</code> authentication and install <code>dotnet-ef</code> tool:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ mkdir <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">PROJECT</span> <span style="color:#f92672">&amp;&amp;</span> cd <span style="color:#a6e22e">$_</span>
$ dotnet tool install <span style="color:#f92672">--</span>global dotnet<span style="color:#f92672">-</span>ef
$ dotnet tool update <span style="color:#f92672">--</span>global dotnet<span style="color:#f92672">-</span>ef <span style="color:#f92672">--</span>version <span style="color:#ae81ff">5.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">-</span>rc<span style="color:#f92672">.</span><span style="color:#ae81ff">2.20475</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span>
$ dotnet <span style="color:#66d9ef">new</span> mvc <span style="color:#f92672">--</span>auth <span style="color:#a6e22e">Individual</span></code></pre></div>
<p>By default new projects get SQLite database context, so you&rsquo;ll need to remove default SQLite database file and packages and install PostgreSQL and Design packages</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ rm app<span style="color:#f92672">.</span>db
$ dotnet remove <span style="color:#66d9ef">package</span> Microsoft.EntityFrameworkCore.Sqlite
$ dotnet add <span style="color:#66d9ef">package</span> Npgsql.EntityFrameworkCore.PostgreSQL <span style="color:#f92672">--</span>version <span style="color:#ae81ff">5.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">-</span>rc2
$ dotnet add <span style="color:#66d9ef">package</span> Microsoft.EntityFrameworkCore.Design <span style="color:#f92672">--</span>version <span style="color:#ae81ff">5.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">-</span>rc<span style="color:#f92672">.</span><span style="color:#ae81ff">2.20475</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span></code></pre></div>
<p>After .NET 5 is released, these specific <code>-rc</code> version suffixes won&rsquo;t be needed.</p>
<p>Now your <code>.csproj</code> should look like this (<em>after removing reference to <code>app.db</code> from it</em>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;Project</span> <span style="color:#a6e22e">Sdk=</span><span style="color:#e6db74">&#34;Microsoft.NET.Sdk.Web&#34;</span><span style="color:#f92672">&gt;</span>

  <span style="color:#f92672">&lt;PropertyGroup&gt;</span>
    <span style="color:#f92672">&lt;TargetFramework&gt;</span>net5.0<span style="color:#f92672">&lt;/TargetFramework&gt;</span>
    <span style="color:#f92672">&lt;UserSecretsId&gt;</span>aspnet-SOME-PROJECT-SOME-ID<span style="color:#f92672">&lt;/UserSecretsId&gt;</span>
  <span style="color:#f92672">&lt;/PropertyGroup&gt;</span>

  <span style="color:#f92672">&lt;ItemGroup&gt;</span>
    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;5.0.0-rc.2.20475.17&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Identity.EntityFrameworkCore&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;5.0.0-rc.2.20475.17&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Identity.UI&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;5.0.0-rc.2.20475.17&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.EntityFrameworkCore.Design&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;5.0.0-rc.2.20475.6&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;IncludeAssets&gt;</span>runtime; build; native; contentfiles; analyzers; buildtransitive<span style="color:#f92672">&lt;/IncludeAssets&gt;</span>
      <span style="color:#f92672">&lt;PrivateAssets&gt;</span>all<span style="color:#f92672">&lt;/PrivateAssets&gt;</span>
    <span style="color:#f92672">&lt;/PackageReference&gt;</span>
    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.EntityFrameworkCore.Tools&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;5.0.0-rc.2.20475.6&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;IncludeAssets&gt;</span>runtime; build; native; contentfiles; analyzers; buildtransitive<span style="color:#f92672">&lt;/IncludeAssets&gt;</span>
      <span style="color:#f92672">&lt;PrivateAssets&gt;</span>all<span style="color:#f92672">&lt;/PrivateAssets&gt;</span>
    <span style="color:#f92672">&lt;/PackageReference&gt;</span>
    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Npgsql.EntityFrameworkCore.PostgreSQL&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;5.0.0-rc2&#34;</span> <span style="color:#f92672">/&gt;</span>
  <span style="color:#f92672">&lt;/ItemGroup&gt;</span>

<span style="color:#f92672">&lt;/Project&gt;</span></code></pre></div>
<p>Change <code>AddDbContext</code> options in <code>Startup.cs</code> - replace <code>UseSqlite</code> with <code>UseNpgsql</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">services<span style="color:#f92672">.</span><span style="color:#a6e22e">AddDbContext</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">ApplicationDbContext</span><span style="color:#f92672">&gt;(</span>options <span style="color:#66d9ef">=&gt;</span>
  options<span style="color:#f92672">.</span><span style="color:#a6e22e">UseNpgsql</span><span style="color:#f92672">(</span>
      <span style="color:#a6e22e">Configuration</span><span style="color:#f92672">.</span><span style="color:#a6e22e">GetConnectionString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;DefaultConnection&#34;</span><span style="color:#f92672">))</span>
<span style="color:#f92672">);</span></code></pre></div>
<p>Change the connection string in <code>appsettings.json</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;ConnectionStrings&#34;</span>: {
      <span style="color:#f92672">&#34;DefaultConnection&#34;</span>: <span style="color:#e6db74">&#34;Server=localhost;Port=5432;Database=some;User Id=birdperson;Password=SOME-PASSWORD;&#34;</span>
    },
    <span style="color:#f92672">&#34;...&#34;</span>: <span style="color:#e6db74">&#34;...&#34;</span>
}</code></pre></div>
<p>If you try to run the project right away, operations with the database (<em>such as registering a new user</em>) might fail with errors like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#a6e22e">PostgresException</span><span style="color:#66d9ef">:</span> <span style="color:#960050;background-color:#1e0010">42804</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">column</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#66d9ef">EmailConfirmed</span><span style="color:#960050;background-color:#1e0010">&#34;</span> <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">type</span> <span style="color:#66d9ef">integer</span> <span style="color:#66d9ef">but</span> <span style="color:#66d9ef">expression</span> <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">type</span> <span style="color:#66d9ef">boolean</span>
<span style="color:#a6e22e">DbUpdateException</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">An</span> <span style="color:#66d9ef">error</span> <span style="color:#66d9ef">occurred</span> <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">updating</span> <span style="color:#66d9ef">the</span> <span style="color:#66d9ef">entries.</span> <span style="color:#66d9ef">See</span> <span style="color:#66d9ef">the</span> <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">exception</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">details.</span></code></pre></div>
<p>You might want to update PostgreSQL database with existing migration generated for SQLite, but that will fail:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ dotnet ef database update
<span style="color:#a6e22e">Method</span> &#39;Create<span style="color:#960050;background-color:#1e0010">&#39;</span> in <span style="color:#66d9ef">type</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#66d9ef">Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlSqlTranslatingExpressionVisitorFactory</span><span style="color:#960050;background-color:#1e0010">&#39;</span> <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">assembly</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#66d9ef">Npgsql.EntityFrameworkCore.PostgreSQL</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Version</span><span style="color:#66d9ef">=</span><span style="color:#ae81ff">3.1</span><span style="color:#f92672">.</span><span style="color:#ae81ff">4.0</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Culture</span><span style="color:#66d9ef">=</span>neutral<span style="color:#f92672">,</span> <span style="color:#a6e22e">PublicKeyToken</span><span style="color:#66d9ef">=</span><span style="color:#ae81ff">5</span>d8b90d52f46fda7<span style="color:#960050;background-color:#1e0010">&#39;</span> does not have an implementation<span style="color:#f92672">.</span></code></pre></div>
<p>So you&rsquo;d want to remove the migration first, but that will fail too:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ dotnet ef migrations remove
<span style="color:#a6e22e">Build</span> started<span style="color:#f92672">...</span>
<span style="color:#a6e22e">Build</span> succeeded<span style="color:#f92672">.</span>
<span style="color:#a6e22e">The</span> migration <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#ae81ff">00000000000000</span><span style="color:#a6e22e">_CreateIdentitySchema</span><span style="color:#960050;background-color:#1e0010">&#39;</span> has already been applied to the database<span style="color:#f92672">.</span> <span style="color:#a6e22e">Revert</span> it and <span style="color:#66d9ef">try</span> again<span style="color:#f92672">.</span> <span style="color:#a6e22e">If</span> the migration has been applied to other databases<span style="color:#f92672">,</span> consider reverting its changes using a <span style="color:#66d9ef">new</span> migration instead<span style="color:#f92672">.</span></code></pre></div>
<p>And the right sequence of commands is the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ dotnet ef database update <span style="color:#ae81ff">0</span>
$ dotnet ef migrations remove
$ dotnet ef migrations add <span style="color:#a6e22e">CreateIdentitySchema</span>
$ dotnet ef database update</code></pre></div>
<p>After that you can connect to the database and check that you have all the required Identity tables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ psql postgres
postgres<span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \c <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span>
<span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">DATABASE</span><span style="color:#f92672">=</span><span style="color:#66d9ef">#</span> \d
                    <span style="color:#a6e22e">List</span> of relations
 <span style="color:#a6e22e">Schema</span> <span style="color:#f92672">|</span>          <span style="color:#a6e22e">Name</span>           <span style="color:#f92672">|</span>   <span style="color:#a6e22e">Type</span>   <span style="color:#f92672">|</span>   <span style="color:#a6e22e">Owner</span>
<span style="color:#f92672">--------+-------------------------+----------+------------</span>
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetRoleClaims</span>        <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetRoleClaims_Id_seq</span> <span style="color:#f92672">|</span> sequence <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetRoles</span>             <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetUserClaims</span>        <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetUserClaims_Id_seq</span> <span style="color:#f92672">|</span> sequence <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetUserLogins</span>        <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetUserRoles</span>         <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetUserTokens</span>        <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">AspNetUsers</span>             <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
 public <span style="color:#f92672">|</span> <span style="color:#a6e22e">__EFMigrationsHistory</span>   <span style="color:#f92672">|</span> table    <span style="color:#f92672">|</span> birdperson
<span style="color:#f92672">(</span><span style="color:#ae81ff">10</span> rows<span style="color:#f92672">)</span></code></pre></div>
<p>It&rsquo;s done, you can now run your project and register your first user.</p>
<h2 id="scaffolding-identity-code">Scaffolding Identity code</h2>
<p>You might want to customize default Identity views and/or modify its code, but by default your project doesn&rsquo;t have these files, so first you&rsquo;ll need to <a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/scaffold-identity?view=aspnetcore-5.0&amp;tabs=netcore-cli#scaffold-identity-into-an-mvc-project-with-authorization">scaffold</a> them.</p>
<p>Install required packages and the tool:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ dotnet tool install <span style="color:#f92672">-</span>g dotnet<span style="color:#f92672">-</span>aspnet<span style="color:#f92672">-</span>codegenerator
$ dotnet tool update <span style="color:#f92672">--</span>global dotnet<span style="color:#f92672">-</span>aspnet<span style="color:#f92672">-</span>codegenerator <span style="color:#f92672">--</span>version <span style="color:#ae81ff">5.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">-</span>rc<span style="color:#f92672">.</span><span style="color:#ae81ff">2.20473</span><span style="color:#f92672">.</span><span style="color:#ae81ff">1</span>
$ dotnet add <span style="color:#66d9ef">package</span> Microsoft.VisualStudio.Web.CodeGeneration.Design <span style="color:#f92672">--</span>version <span style="color:#ae81ff">5.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">-</span>rc<span style="color:#f92672">.</span><span style="color:#ae81ff">2.20475</span><span style="color:#f92672">.</span><span style="color:#ae81ff">17</span>
$ dotnet add <span style="color:#66d9ef">package</span> Microsoft.EntityFrameworkCore.SqlServer <span style="color:#f92672">--</span>version <span style="color:#ae81ff">5.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span><span style="color:#f92672">-</span>rc<span style="color:#f92672">.</span><span style="color:#ae81ff">2.20475</span><span style="color:#f92672">.</span><span style="color:#ae81ff">6</span></code></pre></div>
<p>Run the tool with <code>-h</code> parameter to see the help output and to check if there any problems with your project (<em>if any, they will be listed in the end</em>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ dotnet aspnet<span style="color:#f92672">-</span>codegenerator identity <span style="color:#f92672">-</span>h</code></pre></div>
<p>To see the full list of files you can scaffold/generate:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ dotnet aspnet-codegenerator identity --listFiles
Building project ...
Finding the generator <span style="color:#e6db74">&#39;identity&#39;</span>...
Running the generator <span style="color:#e6db74">&#39;identity&#39;</span>...
File List:
Account._StatusMessage
Account.AccessDenied
Account.ConfirmEmail
Account.ConfirmEmailChange
Account.ExternalLogin
Account.ForgotPassword
Account.ForgotPasswordConfirmation
Account.Lockout
Account.Login
Account.LoginWith2fa
Account.LoginWithRecoveryCode
Account.Logout
Account.Manage._Layout
Account.Manage._ManageNav
Account.Manage._StatusMessage
Account.Manage.ChangePassword
Account.Manage.DeletePersonalData
Account.Manage.Disable2fa
Account.Manage.DownloadPersonalData
Account.Manage.Email
Account.Manage.EnableAuthenticator
Account.Manage.ExternalLogins
Account.Manage.GenerateRecoveryCodes
Account.Manage.Index
Account.Manage.PersonalData
Account.Manage.ResetAuthenticator
Account.Manage.SetPassword
Account.Manage.ShowRecoveryCodes
Account.Manage.TwoFactorAuthentication
Account.Register
Account.RegisterConfirmation
Account.ResendEmailConfirmation
Account.ResetPassword
Account.ResetPasswordConfirmation
RunTime 00:00:07.77</code></pre></div>
<p>So if you want to generate only <code>AccessDenied</code>, <code>Register</code>, <code>Login</code> and <code>Logout</code> pages, then:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">$ dotnet aspnet<span style="color:#f92672">-</span>codegenerator identity <span style="color:#f92672">-</span>dc <span style="color:#a6e22e">SOME</span><span style="color:#f92672">-</span><span style="color:#a6e22e">PROJECT</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Data</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ApplicationDbContext</span> <span style="color:#f92672">--</span>files <span style="color:#e6db74">&#34;Account.AccessDenied;Account.Register;Account.Login;Account.Logout&#34;</span></code></pre></div>
<p>That will generate the following files in your project:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#a6e22e">Areas</span><span style="color:#f92672">/</span>
<span style="color:#f92672">└──</span> <span style="color:#a6e22e">Identity</span>
    <span style="color:#f92672">├──</span> <span style="color:#a6e22e">IdentityHostingStartup</span><span style="color:#f92672">.</span>cs
    <span style="color:#f92672">└──</span> <span style="color:#a6e22e">Pages</span>
        <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Account</span>
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">AccessDenied</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">AccessDenied</span><span style="color:#f92672">.</span>cshtml<span style="color:#f92672">.</span>cs
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Login</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Login</span><span style="color:#f92672">.</span>cshtml<span style="color:#f92672">.</span>cs
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Logout</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Logout</span><span style="color:#f92672">.</span>cshtml<span style="color:#f92672">.</span>cs
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Register</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">│</span>   <span style="color:#f92672">├──</span> <span style="color:#a6e22e">Register</span><span style="color:#f92672">.</span>cshtml<span style="color:#f92672">.</span>cs
        <span style="color:#f92672">│</span>   <span style="color:#f92672">└──</span> <span style="color:#a6e22e">_ViewImports</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">├──</span> <span style="color:#a6e22e">_ValidationScriptsPartial</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">├──</span> <span style="color:#a6e22e">_ViewImports</span><span style="color:#f92672">.</span>cshtml
        <span style="color:#f92672">└──</span> <span style="color:#a6e22e">_ViewStart</span><span style="color:#f92672">.</span>cshtml</code></pre></div>
<p>Why the fuck it&rsquo;s not MVC but <a href="https://docs.microsoft.com/en-us/aspnet/core/razor-pages/?view=aspnetcore-5.0&amp;tabs=visual-studio">Razor Pages</a> - because Microsoft <a href="https://stackoverflow.com/questions/53367899/asp-net-core-scaffold-identity-like-mvc">just decided so</a>. Good thing it still works though, so you can customize those any way you want.</p>
<p>If you would like to generate all the possible files, run that command without <code>--files</code> parameter (<em>or with <code>--useDefaultUI</code> parameter</em>).</p>
<p>Microsoft documentation also claims that after scaffolding you&rsquo;d need to make some changes in <code>Startup.cs</code>, but that part I didn&rsquo;t quite got, as everything works for me as it is.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/dotnet/">dotnet</a><a class="tag" href="https://retifrav.github.io/tags/web/">web</a><a class="tag" href="https://retifrav.github.io/tags/sql/">sql</a><a class="tag" href="https://retifrav.github.io/tags/macos/">macos</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <script>
  var id =  53 ;

  if (id)
  {
    let url = "https://github.com/retifrav/retifrav.github.io/issues/".concat(id);
    let api_url = "https://api.github.com/repos/retifrav/retifrav.github.io/issues/".concat(id, "/comments");
    
    var commentsDiv = document.getElementById("comments");

    let xhr = new XMLHttpRequest();
    xhr.responseType = "json";
    xhr.open("GET", api_url);
    xhr.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
    xhr.send();

    xhr.onload = function()
    {
      if (xhr.status != 200)
      {
        let errorText = document.createElement("p");
        errorText.innerHTML = "<i>Comments for this post yet are not opened yet (or you have GitHub scripts disabled).</i>";
        commentsDiv.appendChild(errorText);
      }
      else
      {
        let comments = xhr.response;

        let mainHeader = document.createElement("h2");
        mainHeader.innerHTML = "Comments: ".concat(comments.length);
        commentsDiv.appendChild(mainHeader);

        let issueLink = document.createElement("p");
        issueLink.innerHTML = "<i>You can leave a comment using this <a href='".concat(url, "'>GitHub issue</a>.</i>");
        commentsDiv.appendChild(issueLink);
        
        comments.forEach(function(comment)
        {
            let commentContent = document.createElement("div");
            commentContent.setAttribute('class', 'gh-comment')
            commentContent.innerHTML = "".concat(
                "<div class='gh-header'>",
                  "<img src='", comment.user.avatar_url, "' />",
                  "<div style='margin:auto 0;'>",
                    "<b><a class='gh-username' href='", comment.user.html_url, "'>", comment.user.login, "</a></b>",
                    " commented at <em>", new Date(comment.created_at), "</em>",
                  "</div>",
                "</div>",
                "<div class='gh-body'>",
                  comment.body_html,
                "</div>"
            );
            commentsDiv.appendChild(commentContent);
        });
      }
    };

    xhr.onerror = function()
    {
      let errorText = document.createElement("p");
      errorText.innerHTML = "<i>Some error loading comments.</i>";
      commentsDiv.appendChild(errorText);
    };
  }
</script>

      
      </div>
    </div>
  </div>

        <div id="footer">
          <div>
              2014-2021,
              <a href="/about/">retif</a>
          </div>
          <div><a href="/about/#licenses">CC BY-SA 4.0 / GPLv3</a></div>
        </div>
      </main>
      <div class="app-header">
        <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
        
        <div class="sidebar-section">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <div id="telegram" class="sidebar-section">
              <script async src="https://telegram.org/js/telegram-widget.js?5"
                  data-telegram-post="decovar/301" data-width="100%" data-userpic="false">
              </script>
            </div>
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">КАКОИ ЖВОТНЕ ВЫ КУСАИТИ?</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>Top</h3>
                <ul class="sidebar-list">
                    <li><a href="/top/cider">Cider</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (63)</a></li>
                  
                  <li><a href="/tags/fail">fail (39)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (35)</a></li>
                  
                  <li><a href="/tags/qt">qt (32)</a></li>
                  
                  <li><a href="/tags/review">review (26)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/linux">linux (22)</a></li>
                  
                  <li><a href="/tags/devops">devops (21)</a></li>
                  
                  <li><a href="/tags/windows">windows (18)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (16)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (13)</a></li>
                  
                  <li><a href="/tags/norway">norway (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/python">python (10)</a></li>
                  
                  <li><a href="/tags/soft">soft (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/apple">apple (6)</a></li>
                  
                  <li><a href="/tags/games">games (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (5)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (5)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (4)</a></li>
                  
                  <li><a href="/tags/russia">russia (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/usa">usa (3)</a></li>
                  
                  <li><a href="/tags/azure">azure (2)</a></li>
                  
                  <li><a href="/tags/tvos">tvos (2)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (2)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/irl">irl (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    
    
  </body>
</html>
