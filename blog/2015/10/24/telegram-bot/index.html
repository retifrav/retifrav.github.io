<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>–ë–æ—Ç –¥–ª—è Telegram | Declaration of VAR</title>
    <link rel="canonical" href="https://decovar.dev/blog/2015/10/24/telegram-bot/" />

    <meta name="generator" content="Hugo 0.111.3" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content="–ë–æ—Ç –¥–ª—è Telegram" />
<meta property="og:description" content="–í Telegram —Å 24 –∏—é–Ω—è 2015 –ø–æ—è–≤–∏–ª–∏—Å—å –±–æ—Ç—ã, –∞ —Ç–æ—á–Ω–µ–µ Telegram Bot API. –¢–æ –µ—Å—Ç—å, —Ç–µ–ø–µ—Ä—å –º–æ—é –ø—Ä–æ—à–ª—É—é –∑–∞–¥–∞—á—É –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ.
This article in english üá∫üá∏." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2015/10/24/telegram-bot/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2015-10-24T19:28:59+03:00" />
<meta property="article:modified_time" content="2015-10-24T19:28:59+03:00" />


    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.c1a9d5434fbba746ef09ebde219b0064b5d4318930fc8463f51550f13a0e1b54.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div style="background-color:orange; padding:4px 16px; font-size:0.8em; text-align:center; font-style:italic;">
        On 19.05.2021 the website was moved to
        <a href="https://decovar.dev/blog/2015/10/24/telegram-bot/" style="color:black; font-weight:bold;">
            https://decovar.dev/</a>. This is just a mirror now.
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">–ë–æ—Ç –¥–ª—è Telegram</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2015-10-24 19:28:59 &#43;0300</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 6 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p>–í <a href="https://telegram.org/">Telegram</a> —Å 24 –∏—é–Ω—è 2015 <a href="https://core.telegram.org/bots/api-changelog#june-24-2015">–ø–æ—è–≤–∏–ª–∏—Å—å –±–æ—Ç—ã</a>, –∞ —Ç–æ—á–Ω–µ–µ <a href="https://core.telegram.org/bots/api">Telegram Bot API</a>. –¢–æ –µ—Å—Ç—å, —Ç–µ–ø–µ—Ä—å <a href="/blog/2015/05/12/telegram-server-status">–º–æ—é –ø—Ä–æ—à–ª—É—é –∑–∞–¥–∞—á—É</a> –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ.</p>
<p>This article <a href="/blog/2017/10/01/telegram-bot-en/">in english üá∫üá∏</a>.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#—Å–æ–∑–¥–∞–Ω–∏–µ-–±–æ—Ç–∞">–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞</a></li>
    <li><a href="#—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è-–±–æ—Ç–∞">–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞</a></li>
    <li><a href="#—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ-–∏-–∑–∞–ø—É—Å–∫-–±–æ—Ç–∞-–Ω–∞-—Å–µ—Ä–≤–µ—Ä–µ">–†–∞–∑–º–µ—â–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</a>
      <ul>
        <li><a href="#supervisor">Supervisor</a></li>
        <li><a href="#systemd">systemd</a></li>
      </ul>
    </li>
  </ul>
</nav>
<p>–ë–æ—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è &ldquo;–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º&rdquo;, –µ–º—É –Ω–µ –Ω—É–∂–µ–Ω –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∏ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ - –Ω–µ –Ω—É–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Telegram –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –≥–¥–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ë–æ—Ç –¥–ª—è Telegram - —ç—Ç–æ –Ω—É –∫–∞–∫ –±—ã –∏ –µ—Å—Ç—å API - –≤–µ–±-–∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä–∞–º Telegram. –ú–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –ª–µ–∂–∏—Ç –Ω–∞ –≤–∞—Å, –∫–∞–∫ –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ –±–æ—Ç–∞.</p>
<p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –±–æ—Ç–∞–º –∑–¥–µ—Å—å: <a href="https://core.telegram.org/bots">https://core.telegram.org/bots</a></p>
<h1 id="—Å–æ–∑–¥–∞–Ω–∏–µ-–±–æ—Ç–∞">–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞</h1>
<p>–ù—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–∞–º–æ–º—É –≥–ª–∞–≤–Ω–æ–º—É –±–æ—Ç—É - <a href="https://telegram.me/botfather">BotFather</a>:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/botfather-help.png" alt="BotFather help">

<p>&hellip;–∏ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/botfather-newbot.png" alt="BotFather newbot">

<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ–∫–µ–Ω - –ø–æ –Ω–µ–º—É –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É, —Ç–∞–∫ —á—Ç–æ —Å–≤–µ—Ç–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –Ω–µ–ª—å–∑—è, –∏–Ω–∞—á–µ –∫—Ç–æ —É–≥–æ–¥–Ω–æ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º –±–æ—Ç–∞ (–ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã).</p>
<p>–°–µ–π—á–∞—Å, –∫–æ–≥–¥–∞ —É –≤–∞—Å —É–∂–µ —Å–æ–∑–¥–∞–Ω –±–æ—Ç –∏ –ø–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω, —è –º–æ–≥—É –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–º–µ–ª –≤ –≤–∏–¥—É –ø–æ–¥ —Å–ª–æ–≤–∞–º–∏ &ldquo;<em>—ç—Ç–æ –Ω—É –∫–∞–∫ –±—ã –∏ –µ—Å—Ç—å API</em>&rdquo;. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Ç–∞–∫–æ–º—É –∞–¥—Ä–µ—Å—É:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>https<span style="color:#66d9ef">:</span><span style="color:#66d9ef">//api.telegram.org/bot–¢–£–¢–í–ê–®–¢–û–ö–ï–ù/getMe</span></span></span></code></pre></div>
<p>–í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–µ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;ok&#34;</span>:<span style="color:#66d9ef">true</span>,<span style="color:#f92672">&#34;result&#34;</span>:{<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#960050;background-color:#1e0010">–¢–£–¢–ë–£–î–ï–¢ID</span>,<span style="color:#f92672">&#34;first_name&#34;</span>:<span style="color:#e6db74">&#34;someTestBot&#34;</span>,<span style="color:#f92672">&#34;username&#34;</span>:<span style="color:#e6db74">&#34;someTestBot&#34;</span>}}<span style="color:#960050;background-color:#1e0010">`</span></span></span></code></pre></div>
<p>–î–ª—è –±–æ–ª—å—à–µ–π –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –≤–æ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/telegram-bot-browser-screen.png" alt="Telegram –±–æ—Ç –≤—ã–∑–æ–≤ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞">

<p>–í–æ—Ç —á—Ç–æ —Ç–∞–∫–æ–µ –±–æ—Ç –≤ Telegram. –í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –≤–µ–±-–∑–∞–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞ –Ω–µ–≥–æ <a href="https://en.wikipedia.org/wiki/JSON">JSON</a>-–æ—Ç–≤–µ—Ç.</p>
<p>–†–∞–∑—É–º–µ–µ—Ç—Å—è, –Ω–∞–º –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤, —Ç–∞–∫ –∏ —Ä–∞–∑–±–æ—Ä JSON-–æ—Ç–≤–µ—Ç–æ–≤, –ø–æ—Ç–æ–º—É –Ω—É–∂–Ω–∞ <em>–ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞</em>, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∫–∞–∫–æ–º-–Ω–∏–±—É–¥—å —Å–µ—Ä–≤–µ—Ä–µ (–º–æ–∂–Ω–æ –∏ –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º –∫–æ–º–ø–µ, –Ω–æ —Ç–æ–≥–¥–∞, –æ—á–µ–≤–∏–¥–Ω–æ, –±–æ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –∫–æ–º–ø—å—é—Ç–µ—Ä). –ò –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª—é–±–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –æ—Ç–ø—Ä–∞–≤–∫—É –≤–µ–±-–∑–∞–ø—Ä–æ—Å–æ–≤, –≤–µ–¥—å, –∫–∞–∫ —è —É–∂–µ —Å–∫–∞–∑–∞–ª –∏ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç–∏—Ä–æ–≤–∞–ª - —Ä–∞–±–æ—Ç–∞ —Å –±–æ—Ç–æ–º —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–µ–±-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤.</p>
<h1 id="—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è-–±–æ—Ç–∞">–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞</h1>
<p>–Ø –≤—ã–±—Ä–∞–ª —è–∑—ã–∫ <a href="https://en.wikipedia.org/wiki/Python_%28programming_language%29">Python</a>. –í—ã–±–æ—Ä –¥–∞–ª–µ–∫–æ –Ω–µ —Å–ª—É—á–∞–µ–Ω. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –¥–ª—è Python —É–∂–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–±–ª–µ–≥—á–∞—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–æ—Ç–∞ - —ç—Ç–æ <a href="https://github.com/eternnoir/pyTelegramBotAPI">pyTelegramBotAPI</a>. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –≤ –Ω–µ–π —Å–¥–µ–ª–∞–Ω–æ —É–∂–µ –≤—Å—ë, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–µ–±-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤, –≤–∞–º –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—à –±–æ—Ç –±—É–¥–µ—Ç —É–º–µ—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å. –û–¥–Ω–∞–∫–æ, –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤—Å—ë –∂–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ API: <a href="https://core.telegram.org/bots/api">https://core.telegram.org/bots/api</a></p>
<p>–ò—Ç–∞–∫, –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å Python –∏ –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å IDE (—Ö–æ—Ç—è, –∫–æ–Ω–µ—á–Ω–æ, –º–æ–∂–Ω–æ –∏ –≤ –ë–ª–æ–∫–Ω–æ—Ç–µ). –í–æ—Ç —á—Ç–æ —É –º–µ–Ω—è:</p>
<ul>
<li><a href="https://www.python.org/downloads/">Python 3</a>;</li>
<li><a href="https://github.com/eternnoir/pyTelegramBotAPI">pyTelegramBotAPI</a>;</li>
<li><a href="https://code.visualstudio.com">Visual Studio Code</a>.</li>
</ul>
<p>–ò—Ç–∞–∫, —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω <strong>Python</strong> –∏ <strong>pip</strong>, —Å—Ç–∞–≤–∏–º <strong>pyTelegramBotAPI</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>pip install pyTelegramBotAPI</span></span></code></pre></div>
<p>–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª <code>someTestBot.py</code>, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞. –Ø –æ–ø—Ä–µ–¥–µ–ª–∏–ª –¥–≤–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥—ã <code>/start</code> –∏ <code>/help</code>, –∞ —Ç–∞–∫–∂–µ –∫–æ–º–∞–Ω–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ <code>/server</code> (–∑–∞–±–µ–≥–∞—è –≤–ø–µ—Ä—ë–¥, –æ–Ω–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ Linux, —Ç–∞–∫ —á—Ç–æ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ Windows –µ—ë –≤—ã–∑–æ–≤ –∑–∞—Ñ–µ–π–ª–∏—Ç—Å—è):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> telebot <span style="color:#75715e"># –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ pyTelegramBotAPI</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> logging <span style="color:#75715e"># –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∂—É—Ä–Ω–∞–ª–∞</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> subprocess <span style="color:#f92672">import</span> call
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∂—É—Ä–Ω–∞–ª–∞</span>
</span></span><span style="display:flex;"><span>logger <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>getLogger(<span style="color:#e6db74">&#39;log&#39;</span>)
</span></span><span style="display:flex;"><span>logger<span style="color:#f92672">.</span>setLevel(logging<span style="color:#f92672">.</span>INFO)
</span></span><span style="display:flex;"><span>fh <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>FileHandler(<span style="color:#e6db74">&#39;someTestBot.log&#39;</span>)
</span></span><span style="display:flex;"><span>fh<span style="color:#f92672">.</span>setLevel(logging<span style="color:#f92672">.</span>DEBUG)
</span></span><span style="display:flex;"><span>formatter <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>Formatter(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%(asctime)s</span><span style="color:#e6db74"> | </span><span style="color:#e6db74">%(levelname)-7s</span><span style="color:#e6db74"> | </span><span style="color:#e6db74">%(message)s</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>fh<span style="color:#f92672">.</span>setFormatter(formatter)
</span></span><span style="display:flex;"><span>logger<span style="color:#f92672">.</span>addHandler(fh)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —Å –µ–≥–æ —Ç–æ–∫–µ–Ω–æ–º API</span>
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> telebot<span style="color:#f92672">.</span>TeleBot(<span style="color:#e6db74">&#34;–¢–£–¢–í–ê–®–¢–û–ö–ï–ù–û–¢BOTFATHER&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∫–∏</span>
</span></span><span style="display:flex;"><span>help_string <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π *—Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç*, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ –æ–±—É—á–∞—é—â–∏—Ö —Ü–µ–ª—è—Ö.</span><span style="color:#ae81ff">\n\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;/start - –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;/help - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>help_string<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;/server - –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --- –∫–æ–º–∞–Ω–¥—ã</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@bot.message_handler</span>(commands<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;start&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_start</span>(message):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è</span>
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_message(message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id, <span style="color:#e6db74">&#34;–ü—Ä–∏–≤–µ—Ç, —è —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç! –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ /help –¥–ª—è –≤—ã–≤–æ–¥ —Å–ø—Ä–∞–≤–∫–∏.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@bot.message_handler</span>(commands<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;help&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_help</span>(message):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ Markdown</span>
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_message(message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id, <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">.</span>join(help_string), parse_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Markdown&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@bot.message_handler</span>(commands<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;server&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_server</span>(message):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># –ø–æ —ç—Ç–æ–º—É –ø—É—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ª–µ–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É —Å–µ—Ä–≤–µ—Ä–∞</span>
</span></span><span style="display:flex;"><span>        call([<span style="color:#e6db74">&#34;/root/scrps/status.sh&#34;</span>])
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞</span>
</span></span><span style="display:flex;"><span>        status <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#34;/root/scrps/status.txt&#34;</span>, <span style="color:#e6db74">&#34;rb&#34;</span>)<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>        bot<span style="color:#f92672">.</span>send_message(message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id, status, parse_mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Markdown&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        logger<span style="color:#f92672">.</span>exception(str(e))
</span></span><span style="display:flex;"><span>        bot<span style="color:#f92672">.</span>send_message(message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id, <span style="color:#e6db74">&#34;–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ –∂—É—Ä–Ω–∞–ª–µ.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># –∑–∞–ø—É—Å–∫ –ø—Ä–∏—ë–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</span>
</span></span><span style="display:flex;"><span>bot<span style="color:#f92672">.</span>polling()</span></span></code></pre></div>
<p>–°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ä–≤–µ—Ä–∞ <code>status.sh</code> —è –≤–∑—è–ª –∏–∑ <a href="/blog/2015/05/12/telegram-server-status">–ø—Ä–æ—à–ª–æ–π —Å—Ç–∞—Ç—å–∏</a> –∏ –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏–ª:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>scrps_path<span style="color:#f92672">=</span>/root/scrps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>info_web<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*Web-servers*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">----------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>service apache2 status | sed -r <span style="color:#e6db74">&#34;s/[*]+/-/g&#34;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>service nginx status | sed -r <span style="color:#e6db74">&#34;s/[*]+/-/g&#34;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>info_mysql<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*MySQL*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">----------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>mysqladmin ping<span style="color:#66d9ef">)</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>mysqladmin status<span style="color:#66d9ef">)</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>info_cpu<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*CPU*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">----------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>top -bn1 | grep <span style="color:#e6db74">&#34;Cpu(s)&#34;</span> | sed <span style="color:#e6db74">&#34;s/.*, *\([0-9.]*\)%* id.*/\1/&#34;</span> | awk <span style="color:#e6db74">&#39;{print 100 - $1&#34; of 100 percents&#34;}&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>info_ram<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*RAM*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">----------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">free: </span><span style="color:#66d9ef">$(</span>free -m | grep Mem | awk <span style="color:#e6db74">&#39;{print $4}&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74"> MB of </span><span style="color:#66d9ef">$(</span>free -m | grep Mem | awk <span style="color:#e6db74">&#39;{print $2}&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74"> MB total
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>info_space<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*HDD*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">----------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>df -h --output<span style="color:#f92672">=</span>source,size,used,avail | head -n2<span style="color:#66d9ef">)</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>text<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>printf <span style="color:#e6db74">&#34;</span>$info_web$info_mysql$info_cpu$info_ram$info_space<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>printf <span style="color:#e6db74">&#39;%s\n&#39;</span> <span style="color:#e6db74">&#34;</span>$text<span style="color:#e6db74">&#34;</span> &gt; <span style="color:#e6db74">${</span>scrps_path<span style="color:#e6db74">}</span>/status.txt</span></span></code></pre></div>
<p>–ï–≥–æ –Ω–∞–¥–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ –ø—É—Ç–∏ <code>/root/scrps/status.sh</code>, –ª–∏–±–æ –∫–∞–∫–æ–º –¥—Ä—É–≥–æ–º, –Ω–æ —Ç–æ–≥–¥–∞ –Ω–∞–¥–æ –Ω–µ –∑–∞–±—ã—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –∏ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –±–æ—Ç–∞.</p>
<p>–ù–∞ —ç—Ç–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞.</p>
<p>–í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ BotFather, —É–∫–∞–∑—ã–≤–∞–µ–º –µ–º—É –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞–µ—Ç –±–æ—Ç:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/botfather-commands.png" alt="BotFather commands">

<h1 id="—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ-–∏-–∑–∞–ø—É—Å–∫-–±–æ—Ç–∞-–Ω–∞-—Å–µ—Ä–≤–µ—Ä–µ">–†–∞–∑–º–µ—â–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</h1>
<p>–ù—É, –≤–æ-–ø–µ—Ä–≤—ã—Ö, –≤—ã —É–∂–µ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —É —Å–µ–±—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ - –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ç–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ, –≥–¥–µ –ª–µ–∂–∏—Ç <code>someTestBot.py</code>, –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å <code>python someTestBot.py</code>. –ï—Å–ª–∏ —ç—Ç–æ Windows, –ø–æ—è–≤–∏—Ç—Å—è &ldquo;—á—ë—Ä–Ω–æ–µ –æ–∫–Ω–æ&rdquo;, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å, —á—Ç–æ –±–æ—Ç —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ù–∞–π–¥–∏—Ç–µ –≤ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <strong>@someTestBot</strong> (—É –≤–∞—Å —Å–≤–æ—ë –∏–º—è, –æ—á–µ–≤–∏–¥–Ω–æ), –∏ –º–æ–∂–Ω–æ —É–∂–µ —Å –Ω–∏–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å—Å—è:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/telegram-bot-test.png" alt="Telegram –±–æ—Ç –∫–æ–º–∞–Ω–¥—ã">

<p>–ö–∞–∫ —è –∏ –≥–æ–≤–æ—Ä–∏–ª, –∫–æ–º–∞–Ω–¥—É <code>/server</code> –≤ Windows –æ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ —Å–º–æ–≥, –∏ –ø–æ–π–º–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∞–ª–æ—Å—å –≤ –∂—É—Ä–Ω–∞–ª.</p>
<p>–ö—Å—Ç–∞—Ç–∏, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥–∞—Ö –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ —á–µ—Ä–µ–∑ BotFather:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/telegram-bot-commands.png" alt="Telegram –±–æ—Ç –∫–æ–º–∞–Ω–¥—ã">

<p>–¢–µ–ø–µ—Ä—å –∑–∞–¥–∞—á–∞, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –±–æ—Ç —Ä–∞–±–æ—Ç–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω–æ. –ò–¥—ë–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å Linux, —Å–æ–∑–¥–∞—ë–º –∫–∞—Ç–∞–ª–æ–≥ <code>/usr/local/bin/someTestBot/</code>, –∫–ª–∞–¥—ë–º –≤ –Ω–µ–≥–æ –Ω–∞—à <code>someTestBot.py</code>. –ö—Å—Ç–∞—Ç–∏, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω <strong>pyTelegramBotAPI</strong> (—Ä–∞–∑—É–º–µ–µ—Ç—Å—è, <strong>Python</strong> –∏ <strong>pip</strong> —Ç–æ–∂–µ).</p>
<p>–Ø —Ä–∞—Å—Å–∫–∞–∂—É –æ –¥–≤—É—Ö —Å–ø–æ—Å–æ–±–∞—Ö, –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–∏—Å–∞: <code>Supervisor</code> –∏ <code>systemd</code>.</p>
<h2 id="supervisor">Supervisor</h2>
<p>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º <a href="http://supervisord.org/">Supervisor</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>sudo apt<span style="color:#f92672">-</span>get install supervisor</span></span></code></pre></div>
<p>–°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (<code>/etc/supervisor/conf.d/someTestBot.conf</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#66d9ef">program:someTestBot</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>directory<span style="color:#f92672">=/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span>bin<span style="color:#f92672">/</span>someTestBot
</span></span><span style="display:flex;"><span>command<span style="color:#66d9ef">=</span>python someTestBot<span style="color:#f92672">.</span>py
</span></span><span style="display:flex;"><span>autostart<span style="color:#66d9ef">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>autorestart<span style="color:#66d9ef">=</span><span style="color:#66d9ef">true</span></span></span></code></pre></div>
<p>–° —Ç–∞–∫–∏–º –∫–æ–Ω—Ñ–∏–≥–æ–º, –Ω–∞–¥–æ –ø–æ–ª–∞–≥–∞—Ç—å, –±–æ—Ç –±—É–¥–µ—Ç &ldquo;–≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è&rdquo; —Å <code>root</code> –ø—Ä–∞–≤–∞–º–∏, —á—Ç–æ –Ω–µ–∫—Ä—É—Ç–æ. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å, —Å –∫–∞–∫–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –ù—É –¥–∞ –ª–∞–¥–Ω–æ, –Ω–∞–º –∂–µ –Ω–∞–¥–æ —Å–∫–æ—Ä–µ–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω, —Ç–∞–∫ —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>supervisorctl update
</span></span><span style="display:flex;"><span>supervisorctl restart someTestBot</span></span></code></pre></div>
<h2 id="systemd">systemd</h2>
<p>–ê –º–æ–∂–Ω–æ –Ω–∏—á–µ–≥–æ –∏ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å, –µ—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <code>systemd</code>.</p>
<p>–°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>vi <span style="color:#f92672">/</span>etc<span style="color:#f92672">/</span>systemd<span style="color:#f92672">/</span>system<span style="color:#f92672">/</span>telegram<span style="color:#f92672">-</span>bot<span style="color:#f92672">-</span>sometestbot<span style="color:#f92672">.</span>service</span></span></code></pre></div>
<p>–° —Ç–∞–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#66d9ef">Unit</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Description</span><span style="color:#66d9ef">=</span><span style="color:#a6e22e">Telegram</span> bot someTestBot
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#66d9ef">Service</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WorkingDirectory</span><span style="color:#f92672">=/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span>bin<span style="color:#f92672">/</span>someTestBot
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ExecStart</span><span style="color:#f92672">=/</span>usr<span style="color:#f92672">/</span>bin<span style="color:#f92672">/</span>python3 <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>local<span style="color:#f92672">/</span>bin<span style="color:#f92672">/</span>someTestBot<span style="color:#f92672">/</span>someTestBot<span style="color:#f92672">.</span>py
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Restart</span><span style="color:#66d9ef">=</span>always
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">RestartSec</span><span style="color:#66d9ef">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SyslogIdentifier</span><span style="color:#66d9ef">=</span>python<span style="color:#f92672">-</span>someTestBot
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">User</span><span style="color:#66d9ef">=</span>someTestBot
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#66d9ef">Install</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WantedBy</span><span style="color:#66d9ef">=</span>multi<span style="color:#f92672">-</span>user<span style="color:#f92672">.</span>target</span></span></code></pre></div>
<p>–í <code>User=someTestBot</code> –º–æ–∂–Ω–æ –∏ <code>root</code> —É–∫–∞–∑–∞—Ç—å, –Ω–æ —è —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª –±—ã —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥ —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —é–∑–µ—Ä–∞. –ü—Ä–∞–≤–¥–∞, —Ç–æ–≥–¥–∞ —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã, –Ω–∞–¥–æ –±—É–¥–µ—Ç –¥–∞—Ç—å —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø –∫ <code>mysqladmin</code>.</p>
<p>–í–∫–ª—é—á–∞–µ–º –Ω–∞—à—É —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å–ª—É–∂–±—É:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>systemctl enable telegram<span style="color:#f92672">-</span>bot<span style="color:#f92672">-</span>sometestbot<span style="color:#f92672">.</span>service
</span></span><span style="display:flex;"><span>systemctl start telegram<span style="color:#f92672">-</span>bot<span style="color:#f92672">-</span>sometestbot<span style="color:#f92672">.</span>service</span></span></code></pre></div>
<p>–ù—É –≤—Å—ë, –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ–º:</p>


    <img class="image-post" loading="lazy" src="/blog/2015/10/24/telegram-bot/images/telegram-bot-server-status.png" alt="Telegram –±–æ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞">

<p>–¢–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞ <strong>@someTestBot</strong>, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –¥–ª—è —Å—Ç–∞—Ç—å–∏, —è —É–¥–∞–ª–∏–ª. –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤ –±—É–¥—É—â–µ–º –∑–∞–π–º—ë—Ç —ç—Ç–æ—Ç —é–∑–µ—Ä–Ω–µ–π–º, —Ç–æ —ç—Ç–æ –Ω–µ —è.</p>
<p>–ß—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å? –ù—É, –≤–æ—Ç —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ - <code>bot.polling()</code> - –≤ –æ–±—â–µ–º-—Ç–æ, –æ–∑–Ω–∞—á–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä–∞–º Telegram, —á—Ç–æ –Ω–µ –æ—á–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –ø–ª–∞–Ω–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö. –õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ—Ç–∞ <em>–æ–∂–∏–¥–∞–ª–æ</em> —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Telegram. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ <a href="https://core.telegram.org/bots/api#setwebhook">webhook</a>. –ö–æ–≥–¥–∞ –¥–æ–±–µ—Ä—É—Å—å –¥–æ —ç—Ç–æ–≥–æ, –¥–æ–ø–æ–ª–Ω—é —Å—Ç–∞—Ç—å—é.</p>



<hr class="updates-divider"/>
<div class="alert alert-info">
    <strong>[02.12.2018] Update:</strong> Telegram –±–æ—Ç —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫
</div>

<p>–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –∑–∞–ø–∏–ª–∏–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∞ webhook. –†–µ—à–∏–ª –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∑–¥–µ—Å—å, –∞ –∑–∞–ø–æ—Å—Ç–∏—Ç—å <a href="/blog/2018/12/02/telegram-bot-webhook-ru">–Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é</a>.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/telegram/">telegram</a><a class="tag" href="https://retifrav.github.io/tags/python/">python</a><a class="tag" href="https://retifrav.github.io/tags/linux/">linux</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <div style="border:2px orange solid; background-color: floralwhite; border-radius:0.5rem; padding: 10px 14px; font-style:italic; font-size:0.9em;">
              If you'd like to comment the article, you can do it on the
              <a href="https://decovar.dev/blog/2015/10/24/telegram-bot/#remark42" style="font-weight:bold;">
                  original website</a>. This one is just a mirror without comments.
          </div>
      
      </div>
    </div>
  </div>

        <div id="footer">
          <div>
              2014 - 2023,
              <a href="/about/">retif</a>
          </div>
          <div><a href="/about/#licenses">CC BY-SA 4.0 / GPLv3</a></div>
        </div>
      </main>
      <div class="app-header">
        <div style="margin:0 0 20px;">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
            <iframe src="https://github.com/sponsors/retifrav/button"
                height="35" style="border:0;"
                title="You can sponsor me">
            </iframe>
            
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div id="telegramWidgetBlock" class="sidebar-section"></div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">–ö–ê–ö–û–ò –ñ–í–û–¢–ù–ï –í–´ –ö–£–°–ê–ò–¢–ò?</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (65)</a></li>
                  
                  <li><a href="/tags/fail">fail (39)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (36)</a></li>
                  
                  <li><a href="/tags/qt">qt (34)</a></li>
                  
                  <li><a href="/tags/review">review (28)</a></li>
                  
                  <li><a href="/tags/linux">linux (26)</a></li>
                  
                  <li><a href="/tags/devops">devops (23)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/windows">windows (19)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (17)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (15)</a></li>
                  
                  <li><a href="/tags/norway">norway (14)</a></li>
                  
                  <li><a href="/tags/irl">irl (12)</a></li>
                  
                  <li><a href="/tags/python">python (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (11)</a></li>
                  
                  <li><a href="/tags/soft">soft (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (8)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (8)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/games">games (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/apple">apple (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/russia">russia (5)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (4)</a></li>
                  
                  <li><a href="/tags/usa">usa (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/azure">azure (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (2)</a></li>
                  
                  <li><a href="/tags/tvos">tvos (2)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (2)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/ldap">ldap (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/science">science (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    <script>
        const telegramBlock = document.getElementById("telegramWidgetBlock");
        window.onload = () =>
        {
            const pinnedTelegramPosts = [319]
            const randomedPostID = pinnedTelegramPosts[
                Math.floor(Math.random() * pinnedTelegramPosts.length)
            ];
            const telegramWidgetScript = document.createElement("script");
            telegramWidgetScript.src = "https://telegram.org/js/telegram-widget.js?21";
            telegramWidgetScript.dataset["telegramPost"] = `decovar/${randomedPostID}`;
            telegramWidgetScript.dataset["color"] = "1E8448";
            telegramWidgetScript.dataset["width"] = "100%";
            telegramWidgetScript.dataset["userpic"] = "false";
            telegramBlock.appendChild(telegramWidgetScript);
        }
    </script>

    
    
  </body>
</html>
