<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Creating a Telegram IV template for a blog on Octopress | Declaration of VAR</title>
    <link rel="canonical" href="https://decovar.dev/blog/2017/05/19/creating-telegram-iv-template-for-octopress/" />

    <meta name="generator" content="Hugo 0.120.4" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content="Creating a Telegram IV template for a blog on Octopress" />
<meta property="og:description" content="Today Telegram announced Instant Views for Everyone. Instant View (IV) has appeared about half a year ago, and back then I was asking about how can we prepare our web-pages to support it, but I never got the answer. And now I see why - there is really no need to do anything on your side - you just need to create a special rule (template) for IV parser at the Instant View Platform.
For those, who (like me) has an Octopress-based blog, it is an extremely easy thing to do." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2017/05/19/creating-telegram-iv-template-for-octopress/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2017-05-19T15:06:04+02:00" />
<meta property="article:modified_time" content="2017-05-19T15:06:04+02:00" />



    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.2a28493e0b91076cde9fb52cb7fec81f63f685a6965e6a9df1179ec846b9141f.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div style="background-color:orange; padding:4px 16px; font-size:0.8em; text-align:center; font-style:italic;">
        On 19.05.2021 the website was moved to
        <a href="https://decovar.dev/blog/2017/05/19/creating-telegram-iv-template-for-octopress/" style="color:black; font-weight:bold;">
            https://decovar.dev/</a>. This is just a mirror now.
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">Creating a Telegram IV template for a blog on Octopress</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2017-05-19 15:06:04 &#43;0200</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 9 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p>Today Telegram announced <a href="https://telegram.org/blog/instant-view-contest-200K">Instant Views for Everyone</a>. Instant View (<strong>IV</strong>) <a href="https://telegram.org/blog/instant-view">has appeared about half a year ago</a>, and back then I was asking about how can we prepare our web-pages to support it, but I never got the answer. And now I see why - there is really no need to do anything on your side - you just need to create a special rule (template) for <strong>IV</strong> parser at the <a href="https://instantview.telegram.org">Instant View Platform</a>.</p>
<p>For those, who (like me) has an <a href="http://octopress.org">Octopress</a>-based blog, it is an extremely easy thing to do.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-iv">What is IV</a></li>
    <li><a href="#how-to-create-a-template">How to create a template</a>
      <ul>
        <li><a href="#about-xpath">About XPath</a></li>
        <li><a href="#making-changes-in-your-octopress-pages">Making changes in your Octopress pages</a></li>
      </ul>
    </li>
    <li><a href="#how-to-use-a-template">How to use a template</a></li>
  </ul>
</nav>
<h1 id="what-is-iv">What is IV</h1>
<p><strong>IV</strong> (Instant View) is a very convenient feature. You can compare it to Apple&rsquo;s <a href="https://support.apple.com/kb/PH21467?locale=en_US">Reader View</a> in Safari - it&rsquo;s a special &ldquo;reading mode&rdquo; for web-pages that displays only the actual content of the page. It removes asides, footers, comments and other distracting blocks of the page, and also disables whatever crazy styles the page has  - that way page looks much cleaner and nicer. <strong>IV</strong> does kinda the same thing, but it does not use your web-browser - everything will be displayed right in the Telegram client.</p>
<p>So, how to enable <strong>IV</strong> for your blog?</p>
<p>Go to the <a href="https://instantview.telegram.org/my/">My Templates</a> page, enter your phone number, confirm the access request and paste the URL for some blog post of yours (and hit Enter). The template editor will appear, showing you 3 blocks:</p>
<ol>
<li>Preview for your original post;</li>
<li>Template editor (here you will work with your <strong>IV</strong> template);</li>
<li>Preview for <strong>IV</strong> generated based on the template.</li>
</ol>
<p>In the very bottom of the page you will see the results of applying your template and also the debug output:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/template-editor-debug.png" alt="Telegram IV template editor">

<h1 id="how-to-create-a-template">How to create a template</h1>
<p>Creating an <strong>IV</strong> template consists of 3 steps:</p>
<ol>
<li>Specifying, how to distinguish posts/articles from other pages on your website;</li>
<li>Defining the essential elements - simply speaking, what tags contain the actual content;</li>
<li>Removing &ldquo;trash&rdquo; blocks like comments, asides, etc.</li>
</ol>
<p>Well, here&rsquo;s a template I&rsquo;ve created for my blog (based on one of the <a href="https://instantview.telegram.org/samples/">Sample Templates</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#75715e">### STEP 1: Define which pages get Instant View and which don&#39;t</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># All blog posts in the Octopress have a /blog/ section in their URLs, so:</span>
</span></span><span style="display:flex;"><span>?<span style="color:#e6db74">path</span>: <span style="color:#e6db74">/blog/</span><span style="color:#f92672">.</span>+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### STEP 2: Define the essential elements</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># To make things easier, we&#39;ll begin by storing the actual body of the post in a *variable* before we start our manipulations</span>
</span></span><span style="display:flex;"><span>$main: <span style="color:#e6db74">//</span>div<span style="color:#f92672">[</span>@id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The &#39;title&#39; and &#39;body&#39; *properties* are required for an Instant View page to work, so we&#39;ll define those two:</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">title</span>: $main<span style="color:#f92672">//</span>h2<span style="color:#f92672">[</span>@class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;entry-title&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">body</span>: $main<span style="color:#f92672">//</span>div<span style="color:#f92672">[</span>@class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;entry-content&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># author of the post</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">author</span>: <span style="color:#e6db74">&#34;retif&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the name of your Telegram channel, so anyone can join it right from the IV</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">channel</span>: <span style="color:#e6db74">&#34;@decovar&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># you can also add a published date of your post</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">published_date</span>: <span style="color:#e6db74">//</span>footer<span style="color:#f92672">[</span><span style="color:#ae81ff">1</span><span style="color:#f92672">]/</span>p<span style="color:#f92672">[</span>@class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta&#34;</span><span style="color:#f92672">][</span><span style="color:#ae81ff">1</span><span style="color:#f92672">]/</span>text()<span style="color:#f92672">[</span><span style="color:#ae81ff">2</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># That&#39;s an example of debugging</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#@debug: &#34;some debug&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## STEP 3: Cleanup</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Surprise - there is no need in cleanup - &lt;div class=&#34;entry-content&#34;&gt; already contains nothing but the article</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Well done, Octopress</span></span></span></code></pre></div>
<p>When you edit something in the template editor, the <strong>IV</strong> preview will try to reflect those changes, and the output will display some information along with debug messages. In the beginning it was doing it soooo slow, like literally for several minutes and that was a pain, but then apparently they fixed something, because now it applies the changes right away.</p>
<h2 id="about-xpath">About XPath</h2>
<p>Now a bit of explanation about the expression for <code>published_date</code> property. <strong>IV</strong> templates use <a href="https://en.wikipedia.org/wiki/XPath">XPath</a> expressions to navigate through the HTML source of your page. And if you would open the page source of any Octopress blog, you&rsquo;d see, that published date can be found in two places, so let&rsquo;s take a look at one of them:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">footer</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;byline author vcard&#34;</span>&gt;Posted by &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fn&#34;</span>&gt;retif&lt;/<span style="color:#f92672">span</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>        2017-05-16 23:54:21 +0200
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;categories&#34;</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;category&#39;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/blog/categories/web/&#39;</span>&gt;web&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sharing&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;basic-alignment left&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/blog/2017/04/24/record-the-screen-with-ffmpeg/&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Previous Post: Screen recording with FFmpeg&#34;</span>&gt;Screen recording with FFmpeg&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">footer</span>&gt;</span></span></code></pre></div>
<p>To get the date string you&rsquo;ll need the following XPath expression:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">//footer[1]/p[@class=&#34;meta&#34;][1]/text()[2]</span></span></span></code></pre></div>
<p>That means: take the first <code>&lt;footer&gt;</code> element you find in the document, then take its first child <code>&lt;p&gt;</code> element that has a <code>meta</code> class, and then get the second text entry of it. By the way, it would be better without unnecessary spaces:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">normalize-space(//footer[1]/p[@class=&#34;meta&#34;][1]/text()[2])</span></span></span></code></pre></div>
<p>But <strong>IV</strong> parser apparently doesn&rsquo;t support all of the XPath functions, because template fails in this case. By the way, Telegram <strong>IV</strong> XPath parser also gets you a bit different results comparing with with some online XPath tools. Keep it in mind, just in case.</p>
<h2 id="making-changes-in-your-octopress-pages">Making changes in your Octopress pages</h2>
<p>Ok, that&rsquo;s good enough and it works, but if you want to make it easier for parser (and for yourself), then you can add a special tag that will store the published date of the post. That can be done by editing <code>/source/_includes/article.html</code> of your blog sources:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">header</span>&gt;
</span></span><span style="display:flex;"><span>    {% if index %}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;entry-title&#34;</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ root_url }}{{ post.url }}&#34;</span>&gt;{% if site.titlecase %}{{ post.title | titlecase }}{% else %}{{ post.title }}{% endif %}&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>    {% else %}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;entry-title&#34;</span>&gt;{% if site.titlecase %}{{ page.title | titlecase }}{% else %}{{ page.title }}{% endif %}&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>    {% endif %}
</span></span><span style="display:flex;"><span>    {% unless page.meta == false %}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta published_date&#34;</span>&gt;{% include post/date.html %}{{ time }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {% include post/date.html %}{{ time }}
</span></span><span style="display:flex;"><span>        {% if site.disqus_short_name and page.comments != false and post.comments != false and site.disqus_show_comment_count == true %}
</span></span><span style="display:flex;"><span>           | &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% if index %}{{ root_url }}{{ post.url }}{% endif %}#disqus_thread&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">data-disqus-identifier</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% if post.meta.disqus_id %}{{ post.meta.disqus_id }}{% else %}{{ site.url }}{{ post.url }}{% endif %}&#34;</span>&gt;Comments&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        {% endif %}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    {% endunless %}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">header</span>&gt;</span></span></code></pre></div>
<p>So, I&rsquo;ve added a new <code>&lt;p&gt;</code> element that has a class <code>meta published_date</code>. Now every blog post will have this meta tag in its source, and I can use it in my <strong>IV</strong> template:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">//p[@class=&#34;meta published_date&#34;]/text()[1]</span></span></span></code></pre></div>
<p>To get a better understanding of how <strong>IV</strong> parser works, you should definitely read the <a href="https://instantview.telegram.org/docs">documentation</a>.</p>
<h1 id="how-to-use-a-template">How to use a template</h1>
<p>Alright, you have created your template. How to apply it to your website? Well, it&rsquo;s kinda fuzzy moment, because <a href="https://instantview.telegram.org/#publishing-templates">the article</a> (to be specific, the &ldquo;<em>For all Telegram users</em>&rdquo; section) only says this:</p>
<blockquote>If you'd like your template to become truly public and seen by all users, regardless of the link they get, the template will need to be approved by the Telegram team. <strong>Read on to learn how this can be achieved at this stage</strong>.</blockquote>
<p>Read on what? Well, the next paragraph tells about the <a href="https://instantview.telegram.org/contest">Template Competition</a>, where you can add your domain and templates for it to be approved. But I have a feeling, that this list will only contain really important and well-known domains, not our silly blogs, so there is no point to add your blog there. Well, actually that makes sense.</p>
<p>So, all this was for nothing? No, it was not. That only means that your blog is unlikely to be supported &ldquo;as it is&rdquo;, but you can use <strong>IV</strong> for your posts anyway. The &ldquo;<em>For your own audience</em>&rdquo; section tells about how to use your templates without the need for them to be approved.</p>
<p>The basic idea is the following: every post you want to have an <strong>IV</strong> needs to be added to <a href="https://instantview.telegram.org/my/">My Templates</a> page under the corresponding domain section (if you have several there):</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-templates.png" alt="Telegram IV templates">

<p>After adding it and applying the template to it you&rsquo;ll be able to copy the <strong>VIEW IN TELEGRAM</strong> link - and that&rsquo;s the link you need to use while sharing the post on your Telegram channel. You can even wrap it into <code>&lt;a&gt;</code> tag (when posting via bot), it will still work - the <strong>INSTANT VIEW</strong> button will appear (if it doesn&rsquo;t, check if your bot&rsquo;s <code>disable_web_page_preview</code> is set to <code>False</code>):</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-link-post.jpg" alt="Telegram IV link via bot">

<p>On the channel it will look like this:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-link-channel.jpg" alt="Telegram IV link on a channel">

<p>And <strong>IV</strong> works already, you can read the post without leaving the Telegram app:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv.png" alt="Telegram IV">

<p>By the way, there is no <strong>Join</strong> button here like it was on preview in the template editor, but that&rsquo;s because I&rsquo;m already subscribed to my channel. And also here I&rsquo;m using an obsolete version of the app (you can tell it by the look of <strong>INSTANT VIEW</strong> button).</p>
<p>Now, if you would change something in your post/article, there is no way to &ldquo;update&rdquo; the <strong>IV</strong> for it. Even if you would &ldquo;delete&rdquo; the template from <strong>My Templates</strong> page and re-add it back - it would still have the same URL and the same cached version with the same <code>rhash</code> value (as a matter of fact, all your templates will have the same <code>rhash</code> value, just look at URLs). But don&rsquo;t worry, after some time it will reflect your changes, and the beautiful part is - you don&rsquo;t need to do anything, all the links with <strong>IV</strong>, that you have already posted, from now on will open the updated <strong>IV</strong>.</p>
<p>One more thing, though: I would recommend you to go through the <a href="https://instantview.telegram.org/checklist">IV checklist</a>, because I have already seen questions like &ldquo;<em>How to better include advertisements into my IV?</em>&rdquo;. So, get familiar with the official recommendations first.</p>



<hr class="updates-divider"/>
<div class="alert alert-info">
    <strong>[08.06.2017] Update:</strong> Don&#39;t create a template for every page
</div>

<p>My apologies, I misunderstood the principle - there is no need to add every single page to <a href="https://instantview.telegram.org/my/">My Templates</a> - it is enough to have just one page per domain. So, you can already have an <strong>IV</strong> for any page in your blog, even for those that were published a year (two, three) ago without creating templates for them.</p>
<p>To do that you only need to wrap your link like this:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-link-wrapper.png" alt="Telegram IV link wrapper">

<p>For example, I have:</p>
<ul>
<li>this <strong>post</strong>: <a href="https://retifrav.github.io/blog/2014/11/25/yify-crap-releases">https://retifrav.github.io/blog/2014/11/25/yify-crap-releases</a></li>
<li>this <strong>rhash</strong>: ccc166ab741b9d</li>
</ul>
<p>After replacing <code>YOUR-LINK-HERE</code> and <code>YOUR-RHASH-HERE</code> with those values I get the following <strong>IV</strong> link: <a href="https://t.me/iv?url=https%3A%2F%2Fretifrav.github.io%2Fblog%2F2014%2F11%2F25%2Fyify-crap-releases%2F&amp;rhash=ccc166ab741b9d">https://t.me/iv?url=https%3A%2F%2Fretifrav.github.io%2Fblog%2F2014%2F11%2F25%2Fyify-crap-releases%2F&amp;rhash=ccc166ab741b9d</a></p>



<hr class="updates-divider"/>
<div class="alert alert-info">
    <strong>[06.02.2018] Update:</strong> Sometimes IV stops working
</div>

<p>I&rsquo;ve noticed that from time to time IV just stops working for me. I do everything the same way as always, and yet tt just doesn&rsquo;t show <strong>INSTANT VIEW</strong> button for my channel posts. For example, the latest post on this screenshot doesn&rsquo;t have it:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-fail-chat.png" alt="Telegram IV fail chat">

<p>If I press the link, here&rsquo;s what I get:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-fail-link.png" alt="Telegram IV fail link">

<p>And if I try to go to my IV templates page and parse the link, here&rsquo;s the result:</p>


    <img class="image-post" loading="lazy" src="/blog/2017/05/19/creating-telegram-iv-template-for-octopress/images/telegram-iv-fail-template.png" alt="Telegram IV fail template">

<p>Totally not cool. There are no details about the error, no explanation - it just doesn&rsquo;t work.</p>
<p>Good news are that eventually (in a couple of weeks) it just &ldquo;gets fixed&rdquo; by itself, so everything is suddenly back to normal (even for links that were not working). But still - not cool.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/web/">web</a><a class="tag" href="https://retifrav.github.io/tags/telegram/">telegram</a><a class="tag" href="https://retifrav.github.io/tags/octopress/">octopress</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <div style="border:2px orange solid; background-color: floralwhite; border-radius:0.5rem; padding: 10px 14px; font-style:italic; font-size:0.9em;">
              If you'd like to comment the article, you can do it on the
              <a href="https://decovar.dev/blog/2017/05/19/creating-telegram-iv-template-for-octopress/#remark42" style="font-weight:bold;">
                  original website</a>. This one is just a mirror without comments.
          </div>
      
      </div>
    </div>
  </div>

        <div id="footer">
          <div>
              2014 - 2023,
              <a href="/about/">retif</a>
          </div>
          <div><a href="/about/#licenses">CC BY-SA 4.0 / GPLv3</a></div>
        </div>
      </main>
      <div class="app-header">
        <div style="margin:0 0 20px;">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
            <iframe src="https://github.com/sponsors/retifrav/button"
                height="35" style="border:0;"
                title="You can sponsor me">
            </iframe>
            
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div id="telegramWidgetBlock" class="sidebar-section"></div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">КАКОИ ЖВОТНЕ ВЫ КУСАИТИ?</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (67)</a></li>
                  
                  <li><a href="/tags/fail">fail (40)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (36)</a></li>
                  
                  <li><a href="/tags/qt">qt (35)</a></li>
                  
                  <li><a href="/tags/review">review (28)</a></li>
                  
                  <li><a href="/tags/linux">linux (27)</a></li>
                  
                  <li><a href="/tags/devops">devops (23)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/windows">windows (19)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (17)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (15)</a></li>
                  
                  <li><a href="/tags/norway">norway (14)</a></li>
                  
                  <li><a href="/tags/irl">irl (12)</a></li>
                  
                  <li><a href="/tags/python">python (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (11)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (11)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (10)</a></li>
                  
                  <li><a href="/tags/soft">soft (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/games">games (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/apple">apple (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/russia">russia (5)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (4)</a></li>
                  
                  <li><a href="/tags/usa">usa (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/azure">azure (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (2)</a></li>
                  
                  <li><a href="/tags/steam-deck">steam-deck (2)</a></li>
                  
                  <li><a href="/tags/tvos">tvos (2)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (2)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/ldap">ldap (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/science">science (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    <script>
        const telegramBlock = document.getElementById("telegramWidgetBlock");
        window.onload = () =>
        {
            const pinnedTelegramPosts = [323]
            const randomedPostID = pinnedTelegramPosts[
                Math.floor(Math.random() * pinnedTelegramPosts.length)
            ];
            const telegramWidgetScript = document.createElement("script");
            telegramWidgetScript.src = "https://telegram.org/js/telegram-widget.js?21";
            telegramWidgetScript.dataset["telegramPost"] = `decovar/${randomedPostID}`;
            telegramWidgetScript.dataset["color"] = "1E8448";
            telegramWidgetScript.dataset["width"] = "100%";
            telegramWidgetScript.dataset["userpic"] = "false";
            telegramBlock.appendChild(telegramWidgetScript);
        }
    </script>

    
    
  </body>
</html>
