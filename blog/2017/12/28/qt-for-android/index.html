<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Qt for Android - setting up development environment | Declaration of VAR</title>
    <link rel="canonical" href="https://decovar.dev/blog/2017/12/28/qt-for-android/" />

    <meta name="generator" content="Hugo 0.91.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon">

    <meta name="author" content="retif" />
    <meta name="description" content="" />

    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="Declaration of VAR" />

    <meta property="og:title" content="Qt for Android - setting up development environment" />
<meta property="og:description" content="Android is one of the Qt&rsquo;s supported target platforms, so you can create applications for Android using Qt.



    


Here I&rsquo;ll show you how to set-up Qt development environment for Android." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://retifrav.github.io/blog/2017/12/28/qt-for-android/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2017-12-28T21:27:12+01:00" />
<meta property="article:modified_time" content="2017-12-28T21:27:12+01:00" />



    <link rel="stylesheet" href="https://retifrav.github.io/css/main.min.c1a9d5434fbba746ef09ebde219b0064b5d4318930fc8463f51550f13a0e1b54.css" />
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/page.css" />
    <link rel="stylesheet" href="/css/comments.css" />

    <script src="/js/mark.js"></script>

    
    
  </head>
  <body>
    <div id="body-hat">
      <div id="title-block">
        <h1 id="blog-title"><a href="/">Declaration of VAR</a></h1>
        <p>and some other stuff</p>
      </div>
    </div>
    <div style="background-color:orange; padding:4px 16px; font-size:0.8em; text-align:center; font-style:italic;">
        On 19.05.2021 the website was moved to
        <a href="https://decovar.dev/blog/2017/12/28/qt-for-android/" style="color:black; font-weight:bold;">
            https://decovar.dev/</a>. This is just a mirror now.
    </div>
    <div id="body-flex">
      <main class="app-container">
        
  <div id="main-container">
    <article class="post">
      <header class="post-header">
        <h1 class ="post-title">Qt for Android - setting up development environment</h1>
        <div class="post-meta">
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg> 2017-12-28 21:27:12 &#43;0100</div>
          <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg> 5 min read</div>
        </div>
      </header>
      <div class="post-content">
        <p><a href="https://www.android.com">Android</a> is one of the Qt&rsquo;s <a href="http://doc.qt.io/qt-5/android-support.html">supported</a> target <a href="http://doc.qt.io/qt-5/supported-platforms.html">platforms</a>, so you can create <a href="http://doc.qt.io/qt-5/examples-android.html">applications for Android</a> using Qt.</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-for-android-logo.png" alt="Qt Android logo">


<p>Here I&rsquo;ll show you how to set-up Qt development environment for Android.</p>
<p>Actually, the process is already described in the Qt documentation: setting up both the <a href="http://doc.qt.io/qt-5/androidgs.html">environment</a> and <a href="http://doc.qt.io/qtcreator/creator-developing-android.html">Qt Creator</a>. However (as usual), there are some surprises that are waiting for you down the road, so I decided to complement the official guide with my comments and screenshots.</p>
<p>I recommend you to use the latest version of Qt (5.10 at the moment) and Qt Creator (4.5.0 at the moment), because some annoying Android-related issues were fixed there, and thus everything is easier now.</p>
<p>The process is more or less the same across all the major development hosts (Linux, Mac OS, Windows). I&rsquo;ll do it for Linux (running inside a virtual machine on my Mac).</p>
<p>First, install Android component from the Qt installer:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/install-qt-for-android.png" alt="Qt installer, Android component">


<p>I have here <a href="https://en.wikipedia.org/wiki/HTC_Evo_3D">HTC Evo 3D</a> (Android 4.0.3), <a href="https://en.wikipedia.org/wiki/Nexus_7_(2013)">Google Nexus 7</a> (Android 6.0.1), and <a href="https://en.wikipedia.org/wiki/Pixel_C">Google Pixel C</a> (Android 8.1.0):</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/three-androids.jpg" alt="Google Nexus 7, Google Pixel C, HTC Evo 3D">


<p>&hellip;so I chose <strong>Android ARMv7</strong>.</p>
<p>Download and install <a href="https://developer.android.com/studio/index.html">Android Studio</a>. I unpacked it to <code>~/programs/android-studio/</code>. Now run <code>~/programs/android-studio/bin/studio.sh</code>. It will ask you for an installation path (I chose <code>~/programs/android/</code>) and then install <strong>Android SDK</strong> and <strong>Android SDK Platform</strong> (latest version by default).</p>
<p>If you want to check what&rsquo;s installed, launch Android Studio again and go to settings:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/android-studio-settings.png" alt="Android Studio settings">


<p>Here&rsquo;s what I have:</p>
<p>


    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/android-sdk-platforms.png" alt="Android SDK platforms">


<br/>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/android-sdk-tools.png" alt="Android SDK tools">

</p>
<p>On Windows you will also need to install <strong>Google USB driver</strong>:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/android-windows-usb.png" alt="Android Windows USB">


<p>Now download and unpack <a href="https://developer.android.com/ndk/downloads/index.html">Android NDK</a>. I put mine to <code>~/programs/android-ndk/</code>. Note that at the moment (Qt Creator 4.7.1 and Qt 5.11.1) NDK version <strong>r18</strong> won&rsquo;t work, you should take <strong>17c</strong>.</p>
<p>Download and unpack <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">JDK</a>. At the moment there are some problems with JDK 9, so it is recommended to go with JDK 8. I put mine to <code>~/programs/jdk/</code>.</p>
<p>Check if you have some not accepted licenses:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">~/programs/android/tools/bin/sdkmanager --licenses</code></pre></div>
<p>You might get this error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ERROR: JAVA_HOME is not set and no <span style="color:#e6db74">&#39;java&#39;</span> command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation.</code></pre></div>
<p>I tried adding <code>JAVA_HOME</code> to environment variables, but it didn&rsquo;t make any difference, so I simply added path to JRE (<code>~/programs/jdk/jre/bin</code>) to the <code>PATH</code> variable.</p>
<p>Run it again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">~/programs/android/tools/bin/sdkmanager --licenses
<span style="color:#ae81ff">5</span> of <span style="color:#ae81ff">5</span> SDK package licenses not accepted. 100% Computing updates...             
Review licenses that have not been accepted <span style="color:#f92672">(</span>y/N<span style="color:#f92672">)</span>?</code></pre></div>
<p>and accept the licenses:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">...the terms of any applicable Open Source software license agreement.
---------------------------------------
Accept? <span style="color:#f92672">(</span>y/N<span style="color:#f92672">)</span>: y
All SDK package licenses accepted</code></pre></div>
<p>If you won&rsquo;t accept all the licenses, something simply might not work.</p>
<p>So, here are all my paths:</p>
<ul>
<li>Android Studio: <code>~/programs/android-studio/</code> (although, this path is not needed);</li>
<li>Android SDK: <code>~/programs/android/</code>;</li>
<li>Android NDK: <code>~/programs/android-ndk/</code>;</li>
<li>JDK: <code>~/programs/jdk/</code>.</li>
</ul>
<p>And now you can launch Qt Creator and set them all at the Android tab:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-creator-android-paths.png" alt="Qt Creator Android paths">


<p>If something is wrong, it will offer you to download missing components:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-creator-android-sdk-missing.png" alt="Qt Creator Android SDK missing">


<p>And if you installed JDK 9, it will fail. I warned you.</p>
<p>If you don&rsquo;t have Android tab in the Qt Creator settings, check if you have Android plugin enabled:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-creator-android-plugin.png" alt="Qt Creator Android plugin">


<p>This part is done.</p>
<p>Now enable <a href="https://developer.android.com/studio/debug/dev-options.html">Developer mode</a> (and USB debugging) on your Android device and connect it to your PC. You can check the connection by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">~/programs/android/platform-tools/adb devices</code></pre></div>
<p>I connected all 3 devices, so here&rsquo;s my output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">List of devices attached
HT22VV208818    device
5A28001752      device
07ab2aea        device</code></pre></div>
<p>On Linux you might see something like this, though:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">List of devices attached
5A28001752    no permissions <span style="color:#f92672">(</span>user in plugdev group; are your udev rules wrong?<span style="color:#f92672">)</span>; see <span style="color:#f92672">[</span>http://developer.android.com/tools/device.html<span style="color:#f92672">]</span></code></pre></div>
<p>On Windows it will be just:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">List of devices attached
5A28001752      unauthorized</code></pre></div>
<p>Or, which is more confusing, you might get <code>ABI is incompatible</code> error while trying to deploy your application:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-android-abi-incompatible.png" alt="Qt Android ABI incompatible">


<p>Both issues (no permissions/unauthorized and incompatible ABI) most probably indicate that you didn&rsquo;t allow your PC to debug your Android device via USB. It&rsquo;s not necessarily your fault, especially if you (like me) never got this request in the first place. In order for your Android device to show you debugging request, you need to restart ADB daemon (while your device is connected to the PC):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo ~/programs/android/platform-tools/adb kill-server
sudo ~/programs/android/platform-tools/adb start-server
~/programs/android/platform-tools/adb devices</code></pre></div>
<p>Now you should get a dialog like this on your device:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/android-usb-debugging-request.png" alt="Android USB debugging request">


<p>Information from <a href="http://developer.android.com/tools/device.html">this page</a> also tells to install <strong>Android adb tools package</strong>. I&rsquo;m not sure how much use does it bring since we already have it from Android Studio, but okay:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">apt-get install android-tools-adb</code></pre></div>
<p>Anyway, once you allow the debugging request, your device will be recognized by ADB (and Qt Creator deployment dialog).</p>
<p>Time to build and run some application on your Android device. I will use the <a href="https://github.com/retifrav/color-corners">Color Corners</a> example again, which is not an Android application by design, but it&rsquo;s a cross-platform framework we are dealing here with, so why the hell not.</p>
<p>If everything was set-up correctly, you should be able to see the <strong>Android build SDK</strong> version in your project build settings:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-android-build-sdk.png" alt="Qt Android build settings">


<p>You can also add Android manifest and other templates:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-android-templates.png" alt="Qt Android templates">


<p>That will allow you to specify the application name, icon, permissions and other stuff (but don&rsquo;t use spaces, otherwise your application will fail to launch saying that it couldn&rsquo;t find a library):</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-android-manifest.png" alt="Qt Android manifest">


<p>Now you can just run your application from Qt Creator:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-creator-target-choice.png" alt="Qt Creator target choice">


<p>And here we say &ldquo;sorry&rdquo; to HTC Evo 3D, because it has a really old Android API (15):</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-android-compatibility.png" alt="Qt Android deployment compatibility">


<p>So we&rsquo;ll launch our application only on Nexus 7 and Pixel C targets:</p>



    <img class="image-post" src="/blog/2017/12/28/qt-for-android/images/qt-android-deployment.jpg" alt="Qt Android deployment">


<p>As you can see, our application was successfully built for Android platform, so it is an <code>.apk</code> file, which can be either run on the connected device from Qt Creator, or you can copy it to the device manually and install it there.</p>
      </div>
    </article>
    <div><div id="tags">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://retifrav.github.io/tags/qt/">qt</a><a class="tag" href="https://retifrav.github.io/tags/android/">android</a></div><hr class="comments-divider"/>
      <div id="comments">
      
          <div style="border:3px orange solid; background-color: floralwhite; border-radius:0.5rem; padding: 10px 14px; font-style:italic;">
              If you'd like to comment the article, you can do it on the
              <a href="https://decovar.dev/blog/2017/12/28/qt-for-android/#remark42" style="font-weight:bold;">
                  original website</a>. This one is just a mirror without comments.
          </div>
      
      </div>
    </div>
  </div>

        <div id="footer">
          <div>
              2014-2021,
              <a href="/about/">retif</a>
          </div>
          <div><a href="/about/#licenses">CC BY-SA 4.0 / GPLv3</a></div>
        </div>
      </main>
      <div class="app-header">
        <a id="avatar" href="/about"><img class="app-header-avatar" src="/images/avatar.png" /></a>
        <iframe src="https://github.com/sponsors/retifrav/button"
            height="35" style="border:0;"
            title="You can sponsor me">
        </iframe>
        
        <div class="sidebar-section">
            <input id="search-query" placeholder="Search in titles and summaries" />
        </div>
        <div id="search-results" style="display:none;"></div>
        <div id="sidebars">
            <div id="telegram" class="sidebar-section">
              <script async src="https://telegram.org/js/telegram-widget.js?5"
                  data-telegram-post="decovar/301" data-width="100%" data-userpic="false">
              </script>
            </div>
            <div class="sidebar-section">
              <h3>Feeds</h3>
              <a href="/index.xml" title="Subscribe to RSS"><img src="/images/rss.png" width="50px"></a>
              <a style="margin-left: 5px;" href="https://t.me/decovar" title="Telegram channel"><img src="/images/telegram.png" width="50px"></a>
            </div>
            <div class="sidebar-section">
                <h3>Stuff</h3>
                <ul class="sidebar-list">
                    <li><a href="/stuff/kakoi-jvotne-vi-kysaiti/index.html">КАКОИ ЖВОТНЕ ВЫ КУСАИТИ?</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>Top</h3>
                <ul class="sidebar-list">
                    <li><a href="/top/cider">Cider</a></li>
                </ul>
            </div>
            <div id="social-networks" class="sidebar-section">
              <h3>Social networks</h3>
              <div style="font-family:Courier New;">
                  Zuck: <i>Yeah so if you ever need info about anyone at Harvard</i><br/>
                  Zuck: <i>Just ask</i><br/>
                  Zuck: <i>I have over 4,000 emails, pictures, addresses, SNS</i><br/>
                  smb: <i>What? How'd you manage that one?</i><br/>
                  Zuck: <i>People just submitted it.</i><br/>
                  Zuck: <i>I don't know why.</i><br/>
                  Zuck: <i>They "trust me"</i><br/>
                  Zuck: <i>Dumb fucks</i>
              </div>
            </div>
            <div class="sidebar-section">
              <h3>Tags</h3>
              <ul style="list-style-type:none; padding:0; margin:0;">
                  
                  <li><a href="/tags/web">web (63)</a></li>
                  
                  <li><a href="/tags/fail">fail (39)</a></li>
                  
                  <li><a href="/tags/dotnet">dotnet (35)</a></li>
                  
                  <li><a href="/tags/qt">qt (32)</a></li>
                  
                  <li><a href="/tags/review">review (27)</a></li>
                  
                  <li><a href="/tags/linux">linux (23)</a></li>
                  
                  <li><a href="/tags/macos">macos (23)</a></li>
                  
                  <li><a href="/tags/devops">devops (22)</a></li>
                  
                  <li><a href="/tags/windows">windows (18)</a></li>
                  
                  <li><a href="/tags/mestuff">mestuff (16)</a></li>
                  
                  <li><a href="/tags/movies">movies (15)</a></li>
                  
                  <li><a href="/tags/tractor">tractor (14)</a></li>
                  
                  <li><a href="/tags/norway">norway (13)</a></li>
                  
                  <li><a href="/tags/irl">irl (12)</a></li>
                  
                  <li><a href="/tags/telegram">telegram (12)</a></li>
                  
                  <li><a href="/tags/python">python (10)</a></li>
                  
                  <li><a href="/tags/soft">soft (10)</a></li>
                  
                  <li><a href="/tags/travel">travel (10)</a></li>
                  
                  <li><a href="/tags/applescript">applescript (9)</a></li>
                  
                  <li><a href="/tags/embedded">embedded (9)</a></li>
                  
                  <li><a href="/tags/piracy">piracy (9)</a></li>
                  
                  <li><a href="/tags/octopress">octopress (8)</a></li>
                  
                  <li><a href="/tags/banks">banks (7)</a></li>
                  
                  <li><a href="/tags/ios">ios (7)</a></li>
                  
                  <li><a href="/tags/apple">apple (6)</a></li>
                  
                  <li><a href="/tags/cmake">cmake (6)</a></li>
                  
                  <li><a href="/tags/cpp">cpp (6)</a></li>
                  
                  <li><a href="/tags/games">games (6)</a></li>
                  
                  <li><a href="/tags/javascript">javascript (6)</a></li>
                  
                  <li><a href="/tags/photo">photo (6)</a></li>
                  
                  <li><a href="/tags/sql">sql (6)</a></li>
                  
                  <li><a href="/tags/hugo">hugo (4)</a></li>
                  
                  <li><a href="/tags/russia">russia (4)</a></li>
                  
                  <li><a href="/tags/wordpress">wordpress (4)</a></li>
                  
                  <li><a href="/tags/android">android (3)</a></li>
                  
                  <li><a href="/tags/tv">tv (3)</a></li>
                  
                  <li><a href="/tags/usa">usa (3)</a></li>
                  
                  <li><a href="/tags/azure">azure (2)</a></li>
                  
                  <li><a href="/tags/tvos">tvos (2)</a></li>
                  
                  <li><a href="/tags/unsolved">unsolved (2)</a></li>
                  
                  <li><a href="/tags/books">books (1)</a></li>
                  
                  <li><a href="/tags/ffmpeg">ffmpeg (1)</a></li>
                  
                  <li><a href="/tags/music">music (1)</a></li>
                  
                  <li><a href="/tags/privacy">privacy (1)</a></li>
                  
                  <li><a href="/tags/vr">vr (1)</a></li>
                  
              </ul>
            </div>
        </div>
      </header>
    </div>

    <script src="/js/search.js"></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-53340325-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "UA-53340325-1");
    </script>

    
    
  </body>
</html>
